var tinymce={majorVersion:"3",minorVersion:"0.8",releaseDate:"2008-04-30",_init:function(){function e(a){if(a.src&&/tiny_mce(|_dev|_src|_gzip|_jquery|_prototype).js/.test(a.src)){if(/_(src|dev)\.js/g.test(a.src))c.suffix="_src";if((f=a.src.indexOf("?"))!=-1)c.query=a.src.substring(f+1);c.baseURL=a.src.substring(0,a.src.lastIndexOf("/"));if(h&&c.baseURL.indexOf("://")==-1)c.baseURL=h+c.baseURL;return c.baseURL}return null}var c=this,g=document,b=window,a=navigator,d=a.userAgent,h,f;c.isOpera=b.opera&&
opera.buildNumber;c.isWebKit=/WebKit/.test(d);c.isOldWebKit=c.isWebKit&&!b.getSelection().getRangeAt;c.isIE=!c.isWebKit&&!c.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(a.appName);c.isIE6=c.isIE&&/MSIE [56]/.test(d);c.isGecko=!c.isWebKit&&/Gecko/.test(d);c.isMac=d.indexOf("Mac")!=-1;if(b.tinyMCEPreInit)c.suffix=tinyMCEPreInit.suffix,c.baseURL=tinyMCEPreInit.base,c.query=tinyMCEPreInit.query;else{c.suffix="";a=g.getElementsByTagName("base");for(b=0;b<a.length;b++)if(a[b].href)h=a[b].href;a=g.getElementsByTagName("script");
for(b=0;b<a.length;b++)if(e(a[b]))return;if(g=g.getElementsByTagName("head")[0]){a=g.getElementsByTagName("script");for(b=0;b<a.length;b++)if(e(a[b]))break}}},is:function(e,c){var g=typeof e;return!c?g!="undefined":c=="array"&&e instanceof Array?!0:g==c},each:function(e,c,g){var b,a;if(!e)return 0;g=g||e;if(typeof e.length!="undefined")for(b=0,a=e.length;b<a;b++){if(c.call(g,e[b],b,e)===!1)return 0}else for(b in e)if(e.hasOwnProperty(b)&&c.call(g,e[b],b,e)===!1)return 0;return 1},map:function(e,c){var g=
[];tinymce.each(e,function(b){g.push(c(b))});return g},grep:function(e,c){var g=[];tinymce.each(e,function(b){(!c||c(b))&&g.push(b)});return g},inArray:function(e,c){var g,b;if(e)for(g=0,b=e.length;g<b;g++)if(e[g]===c)return g;return-1},extend:function(e,c){var g,b=arguments;for(g=1;g<b.length;g++)c=b[g],tinymce.each(c,function(a,d){typeof a!=="undefined"&&(e[d]=a)});return e},trim:function(e){return(e?""+e:"").replace(/^\s*|\s*$/g,"")},create:function(e,c){var g,b,a,d,h,f=0,e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);
a=e[3].match(/(^|\.)(\w+)$/i)[2];b=this.createNS(e[3].replace(/\.\w+$/,""));if(!b[a])if(e[2]=="static"){if(b[a]=c,this.onCreate)this.onCreate(e[2],e[3],b[a])}else{c[a]||(c[a]=function(){},f=1);b[a]=c[a];this.extend(b[a].prototype,c);if(e[5])g=this.resolve(e[5]).prototype,d=e[5].match(/\.(\w+)$/i)[1],h=b[a],b[a]=f?function(){return g[d].apply(this,arguments)}:function(){this.parent=g[d];return h.apply(this,arguments)},b[a].prototype[a]=b[a],this.each(g,function(d,f){b[a].prototype[f]=g[f]}),this.each(c,
function(d,f){g[f]?b[a].prototype[f]=function(){this.parent=g[f];return d.apply(this,arguments)}:f!=a&&(b[a].prototype[f]=d)});this.each(c["static"],function(d,f){b[a][f]=d});if(this.onCreate)this.onCreate(e[2],e[3],b[a].prototype)}},walk:function(e,c,g,b){b=b||this;e&&(g&&(e=e[g]),tinymce.each(e,function(a,d){if(c.call(b,a,d,g)===!1)return!1;tinymce.walk(a,c,g,b)}))},createNS:function(e,c){var g,b,c=c||window,e=e.split(".");for(g=0;g<e.length;g++)b=e[g],c[b]||(c[b]={}),c=c[b];return c},resolve:function(e,
c){var g,b,c=c||window,e=e.split(".");for(g=0,b=e.length;g<b;g++)if(c=c[e[g]],!c)break;return c},addUnload:function(e,c){var g=this,b=window,e={func:e,scope:c||this};if(g.unloads)g.unloads.push(e);else{var a=function(){var h=g.unloads,f,j;if(h){for(j in h)(f=h[j])&&f.func&&f.func.call(f.scope,1);b.detachEvent?(b.detachEvent("onbeforeunload",d),b.detachEvent("onunload",a)):b.removeEventListener&&b.removeEventListener("unload",a,!1);g.unloads=b=a=null;window.CollectGarbage&&window.CollectGarbage()}},
d=function(){var d=document;if(d.readyState=="interactive"){var f=function(){d.detachEvent("onstop",f);a();d=null};d.attachEvent("onstop",f);window.setTimeout(function(){d.detachEvent("onstop",f)},0)}};b.attachEvent?(b.attachEvent("onunload",a),b.attachEvent("onbeforeunload",d)):b.addEventListener&&b.addEventListener("unload",a,!1);g.unloads=[e]}return e},removeUnload:function(e){var c=this.unloads,g=null;tinymce.each(c,function(b,a){if(b&&b.func==e)return c.splice(a,1),g=e,!1});return g},explode:function(e,
c){return e?tinymce.map(e.split(c||","),tinymce.trim):e},_addVer:function(e){var c;if(!this.query)return e;c=(e.indexOf("?")==-1?"?":"&")+this.query;return e.indexOf("#")==-1?e+c:e.replace("#",c+"#")}};window.tinymce=tinymce;tinymce._init();
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this;this.listeners=[]},add:function(e,c){this.listeners.push({cb:e,scope:c||this.scope});return e},addToTop:function(e,c){this.listeners.unshift({cb:e,scope:c||this.scope});return e},remove:function(e){var c=this.listeners,g=null;tinymce.each(c,function(b,a){if(e==b.cb)return g=e,c.splice(a,1),!1});return g},dispatch:function(){var e,c=arguments,g,b=this.listeners;for(g=0;g<b.length;g++)if(e=
b[g],e=e.cb.apply(e.scope,c),e===!1)break;return e}});
(function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(c,g){var b=this,a,g=b.settings=g||{};if(/^(mailto|news|javascript|about):/i.test(c)||/^\s*#/.test(c))b.source=c;else if(c.indexOf("/")===0&&c.indexOf("//")!==0&&(c=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+c),c.indexOf("://")===-1&&c.indexOf("//")!==0&&(c=(g.base_uri.protocol||"http")+"://mce_host"+b.toAbsPath(g.base_uri.path,c)),c=c.replace(/@@/g,"(mce_at)"),c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(c),
e("source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),function(a,h){var f=c[h];f&&(f=f.replace(/\(mce_at\)/g,"@@"));b[a]=f}),a=g.base_uri){if(!b.protocol)b.protocol=a.protocol;if(!b.userInfo)b.userInfo=a.userInfo;if(!b.port&&b.host=="mce_host")b.port=a.port;if(!b.host||b.host=="mce_host")b.host=a.host;b.source=""}},setPath:function(c){c=/^(.*?)\/?(\w+)?$/.exec(c);this.path=c[0];this.directory=c[1];this.file=c[2];this.source="";this.getURI()},
toRelative:function(c){var e,c=new tinymce.util.URI(c,{base_uri:this});if(c.host!="mce_host"&&this.host!=c.host&&c.host||this.port!=c.port||this.protocol!=c.protocol)return c.getURI();e=this.toRelPath(this.path,c.path);c.query&&(e+="?"+c.query);c.anchor&&(e+="#"+c.anchor);return e},toAbsolute:function(c,e){c=new tinymce.util.URI(c,{base_uri:this});return c.getURI(this.host==c.host?e:0)},toRelPath:function(c,e){var b,a=0,d="",h,c=c.substring(0,c.lastIndexOf("/")),c=c.split("/");b=e.split("/");if(c.length>=
b.length)for(h=0;h<c.length;h++)if(h>=b.length||c[h]!=b[h]){a=h+1;break}if(c.length<b.length)for(h=0;h<b.length;h++)if(h>=c.length||c[h]!=b[h]){a=h+1;break}if(a==1)return e;for(h=0;h<c.length-(a-1);h++)d+="../";for(h=a-1;h<b.length;h++)d+=h!=a-1?"/"+b[h]:b[h];return d},toAbsPath:function(c,g){var b,a=0,d=[],c=c.split("/"),g=g.split("/");e(c,function(a){a&&d.push(a)});c=d;for(b=g.length-1,d=[];b>=0;b--)g[b].length==0||g[b]=="."||(g[b]==".."?a++:a>0?a--:d.push(g[b]));b=c.length-a;return b<=0?"/"+d.reverse().join("/"):
"/"+c.slice(0,b).join("/")+"/"+d.reverse().join("/")},getURI:function(c){var e;if(!this.source||c)e="",c||(this.protocol&&(e+=this.protocol+"://"),this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e;return this.source}})})();
(function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(c){var c=this.get(c),g;c&&e(c.split("&"),function(b){b=b.split("=");g=g||{};g[unescape(b[0])]=unescape(b[1])});return g},setHash:function(c,g,b,a,d,h){var f="";e(g,function(a,d){f+=(!f?"":"&")+escape(d)+"="+escape(a)});this.set(c,f,b,a,d,h)},get:function(c){var e=document.cookie,b=c+"=",a;if(e){a=e.indexOf("; "+b);if(a==-1){if(a=e.indexOf(b),a!=0)return null}else a+=2;c=e.indexOf(";",a);if(c==-1)c=e.length;
return unescape(e.substring(a+b.length,c))}},set:function(c,e,b,a,d,h){document.cookie=c+"="+escape(e)+(b?"; expires="+b.toGMTString():"")+(a?"; path="+escape(a):"")+(d?"; domain="+d:"")+(h?"; secure":"")},remove:function(c,e){var b=new Date;b.setTime(b.getTime()-1E3);this.set(c,"",b,e,b)}})})();
tinymce.create("static tinymce.util.JSON",{serialize:function(e){var c,g,b=tinymce.util.JSON.serialize,a;if(e==null)return"null";a=typeof e;if(a=="string")return g="\u0008b\tt\nn\u000cf\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'])/g,function(a,h){c=g.indexOf(h);if(c+1)return"\\"+g.charAt(c+1);a=h.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+'"';if(a=="object"){if(e instanceof Array){for(c=0,g="[";c<e.length;c++)g+=(c>0?",":"")+b(e[c]);return g+"]"}g="{";for(c in e)g+=
typeof e[c]!="function"?(g.length>1?',"':'"')+c+'":'+b(e[c]):"";return g+"}"}return""+e},parse:function(e){try{return eval("("+e+")")}catch(c){}}});
tinymce.create("static tinymce.util.XHR",{send:function(e){function c(a){g=0;try{g=new ActiveXObject(a)}catch(d){}return g}var g,b,a=window,d=0;e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=e.async===!1?!1:!0;e.data=e.data||"";if(g=a.XMLHttpRequest?new XMLHttpRequest:c("Microsoft.XMLHTTP")||c("Msxml2.XMLHTTP"))g.overrideMimeType&&g.overrideMimeType(e.content_type),g.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&g.setRequestHeader("Content-Type",
e.content_type),g.send(e.data),b=a.setInterval(function(){if(g.readyState==4||d++>1E4)a.clearInterval(b),e.success&&d<1E4&&g.status==200?e.success.call(e.success_scope,""+g.responseText,g,e):e.error&&e.error.call(e.error_scope,d>1E4?"TIMED_OUT":"GENERAL",g,e),g=null},10)}});
(function(){var e=tinymce.extend,c=tinymce.util.JSON,g=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=e({},b);this.count=0},send:function(b){var a=b.error,d=b.success,b=e(this.settings,b);b.success=function(h,f){h=c.parse(h);typeof h=="undefined"&&(h={error:"JSON Parse error."});h.error?a.call(b.error_scope||b.scope,h.error,f):d.call(b.success_scope||b.scope,h.result)};b.error=function(d,f){a.call(b.error_scope||b.scope,d,f)};b.data=c.serialize({id:b.id||
"c"+this.count++,method:b.method,params:b.params});b.content_type="application/json";g.send(b)},"static":{sendRPC:function(b){return(new tinymce.util.JSONRequest).send(b)}}})})();
(function(){var e=tinymce.each,c=tinymce.is,g=tinymce.isWebKit,b=tinymce.isIE;tinymce.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,listeners:{},pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,cache:{},idPattern:/^#[\w]+$/,elmPattern:/^[\w_*]+$/,elmClassPattern:/^([\w_]*)\.([\w_]+)$/,DOMUtils:function(a,d){this.doc=a;this.win=window;this.files={};this.cssFlicker=!1;this.counter=0;this.boxModel=!tinymce.isIE||a.compatMode=="CSS1Compat";this.stdMode=a.documentMode===
8;this.settings=tinymce.extend({keep_values:!1,hex_colors:1,process_html:1},d);if(tinymce.isIE6)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(h){this.cssFlicker=!0}tinymce.addUnload(this.destroy,this)},getRoot:function(){var a=this.settings;return a&&this.get(a.root_element)||this.doc.body},getViewPort:function(a){var d,a=!a?this.win:a;d=a.document;d=this.boxModel?d.documentElement:d.body;return{x:a.pageXOffset||d.scrollLeft,y:a.pageYOffset||d.scrollTop,w:a.innerWidth||d.clientWidth,h:a.innerHeight||
d.clientHeight}},getRect:function(a){var d,h,f,a=this.get(a);d=this.getPos(a);h=this.getStyle(a,"width");f=this.getStyle(a,"height");h.indexOf("px")===-1&&(h=0);f.indexOf("px")===-1&&(f=0);return{x:d.x,y:d.y,w:parseInt(h)||a.offsetWidth||a.clientWidth,h:parseInt(f)||a.offsetHeight||a.clientHeight}},getParent:function(a,d,h){var f,b=this.settings,a=this.get(a);b.strict_root&&(h=h||this.getRoot());c(d,"string")&&(f=d.toUpperCase(),d=function(a){var d=!1;if(a.nodeType==1&&f==="*")return d=!0,!1;e(f.split(","),
function(f){if(a.nodeType==1&&(b.strict&&a.nodeName.toUpperCase()==f||a.nodeName==f))return d=!0,!1});return d});for(;a;){if(a==h)break;if(d(a))return a;a=a.parentNode}return null},get:function(a){var d;return a&&this.doc&&typeof a=="string"&&(d=a,(a=this.doc.getElementById(a))&&a.id!==d)?this.doc.getElementsByName(d)[1]:a},select:function(a,d){function h(a){if(!a.mce_save)a.mce_save=1,m.push(a)}function f(a){a.getAttribute("mce_save")||(a.setAttribute("mce_save","1"),m.push(a))}var j=this,c,g,l,
m=[],n,p,o,u,d=j.get(d)||j.doc;if(d.querySelectorAll){if(d!=j.doc)p=d.id,d.id="_mc_tmp",a="#_mc_tmp "+a;o=tinymce.grep(d.querySelectorAll(a));d.id=p;return o}var s=j.settings.strict?function(a,d){return a.getElementsByTagName(d.toLowerCase())}:function(a,d){return a.getElementsByTagName(d)};if(j.elmPattern.test(a)){n=s(d,a);for(p=0,o=n.length;p<o;p++)m.push(n[p]);return m}if(j.elmClassPattern.test(a)){l=j.elmClassPattern.exec(a);n=s(d,l[1]||"*");g=" "+l[2]+" ";for(p=0,o=n.length;p<o;p++)u=n[p],u.className&&
(" "+u.className+" ").indexOf(g)!==-1&&m.push(u);return m}e(a.split(","),function(o,p){o=tinymce.trim(o);if(j.elmPattern.test(o))e(s(d,o),function(a){h(a)});else if(j.elmClassPattern.test(o))n=j.elmClassPattern.exec(o),e(s(d,n[1]),function(a){j.hasClass(a,n[2])&&h(a)});else{if(!(c=j.cache[a])){c="x=(function(cf, s) {";l=o.split(" ");e(l,function(a){a=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@([\w\\]+)([\^\$\*!]?=)([\w\\]+)\])?(?:\:([\w\\]+))?/i.exec(a);a[1]=a[1]||"*";c+='find("'+a[1]+'", function(n) {';
a[2]&&(c+='if (n.id !== "'+a[2]+'") return;');a[3]&&(c+='var c = " " + n.className + " ";',c+="if (",g="",e(a[3].split("."),function(a){a&&(g+=(g?"||":"")+'c.indexOf(" '+a+' ") === -1')}),c+=g+") return;")});c+="cf(n);";for(p=l.length-1;p>=0;p--)c+="}, "+(p?"n":"s")+");";c+="})";j.cache[a]=c=eval(c)}c(b?f:h,d)}});e(m,function(a){b?a.removeAttribute("mce_save"):delete a.mce_save});return m},add:function(a,d,h,f,b){var i=this;return this.run(a,function(a){var g,m;g=c(d,"string")?i.doc.createElement(d):
d;if(h){for(m in h)h.hasOwnProperty(m)&&!c(h[m],"object")&&i.setAttrib(g,m,""+h[m]);h.style&&!c(h.style,"string")&&e(h.style,function(a,d){i.setStyle(g,d,a)})}f&&(f.nodeType?g.appendChild(f):i.setHTML(g,f));return!b?a.appendChild(g):g})},create:function(a,d,h){return this.add(this.doc.createElement(a),a,d,h,1)},createHTML:function(a,d,h){var f="",b;f+="<"+a;for(b in d)d.hasOwnProperty(b)&&(f+=" "+b+'="'+this.encode(d[b])+'"');return tinymce.is(h)?f+">"+h+"</"+a+">":f+" />"},remove:function(a,d){return this.run(a,
function(a){var f;f=a.parentNode;if(!f)return null;d&&e(a.childNodes,function(d){f.insertBefore(d.cloneNode(!0),a)});return f.removeChild(a)})},setStyle:function(a,d,h){var f=this;return f.run(a,function(c){var e;e=c.style;d=d.replace(/-(\D)/g,function(a,d){return d.toUpperCase()});if(f.pixelStyles.test(d)&&(tinymce.is(h,"number")||/^[\-0-9\.]+$/.test(h)))h+="px";switch(d){case "opacity":if(b&&(e.filter=h===""?"":"alpha(opacity="+h*100+")",!a.currentStyle||!a.currentStyle.hasLayout))e.display="inline-block";
e[d]=e["-moz-opacity"]=e["-khtml-opacity"]=h||"";break;case "float":b?e.styleFloat=h:e.cssFloat=h;break;default:e[d]=h||""}f.settings.update_styles&&f.setAttrib(c,"mce_style")})},getStyle:function(a,d,h){a=this.get(a);if(!a)return!1;if(this.doc.defaultView&&h){d=d.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(d)}catch(f){return null}}d=d.replace(/-(\D)/g,function(a,d){return d.toUpperCase()});d=="float"&&(d=b?"styleFloat":"cssFloat");
return a.currentStyle&&h?a.currentStyle[d]:a.style[d]},setStyles:function(a,d){var h=this,f=h.settings,b;b=f.update_styles;f.update_styles=0;e(d,function(d,f){h.setStyle(a,f,d)});f.update_styles=b;f.update_styles&&h.setAttrib(a,f.cssText)},setAttrib:function(a,d,h){var f=this;f.settings.strict&&(d=d.toLowerCase());return this.run(a,function(a){var b=f.settings;switch(d){case "style":b.keep_values&&(h&&!f._isRes(h)?a.setAttribute("mce_style",h,2):a.removeAttribute("mce_style",2));a.style.cssText=h;
break;case "class":a.className=h||"";break;case "src":case "href":b.keep_values&&(b.url_converter&&(h=b.url_converter.call(b.url_converter_scope||f,h,d,a)),f.setAttrib(a,"mce_"+d,h,2))}c(h)&&h!==null&&h.length!==0?a.setAttribute(d,""+h,2):a.removeAttribute(d,2)})},setAttribs:function(a,d){var h=this;return this.run(a,function(a){e(d,function(d,b){h.setAttrib(a,b,d)})})},getAttrib:function(a,d,h){var f,a=this.get(a);if(!a||a.nodeType!==1)return!1;c(h)||(h="");if(/^(src|href|style|coords)$/.test(d)&&
(f=a.getAttribute("mce_"+d)))return f;f=a.getAttribute(d,2);if(!f)switch(d){case "class":f=a.className;break;default:if(b&&d==="name"&&a.nodeName==="A"){f=a.name;break}f=(f=a.attributes[d])&&c(f.nodeValue)?f.nodeValue:f}switch(d){case "style":if(f=f||a.style.cssText)f=this.serializeStyle(this.parseStyle(f)),this.settings.keep_values&&!this._isRes(f)&&a.setAttribute("mce_style",f)}g&&d==="class"&&f&&(f=f.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(b)switch(d){case "rowspan":case "colspan":f===1&&
(f="");break;case "size":f==="+0"&&(f="");break;case "hspace":f===-1&&(f="");break;case "tabindex":f===32768&&(f="");break;case "shape":f=f.toLowerCase();break;default:d.indexOf("on")===0&&f&&(f=(""+f).replace(/^function\s+anonymous\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return f&&f!=""?""+f:h},getPos:function(a){var d=0,h=0,f=this.doc,c;if((a=this.get(a))&&b)return a=a.getBoundingClientRect(),h=this.boxModel?f.documentElement:f.body,d=this.getStyle(this.select("html")[0],"borderWidth"),d=(d=="medium"||this.boxModel&&
!this.isIE6)&&2||d,a.top+=this.win.self!=this.win.top?2:0,{x:a.left+h.scrollLeft-d,y:a.top+h.scrollTop-d};for(c=a;c;)d+=c.offsetLeft||0,h+=c.offsetTop||0,c=c.offsetParent;for(c=a;c;)if(/^table-row|inline.*/i.test(this.getStyle(c,"display",1))||(d-=c.scrollLeft||0,h-=c.scrollTop||0),c=c.parentNode,c==f.body)break;return{x:d,y:h}},parseStyle:function(a){function d(a,d,f){var h,b;if(h=c[a+"-top"+d])b=c[a+"-right"+d],h==b&&(h=c[a+"-bottom"+d],b==h&&(b=c[a+"-left"+d],h==b&&(c[f]=b,delete c[a+"-top"+d],
delete c[a+"-right"+d],delete c[a+"-bottom"+d],delete c[a+"-left"+d])))}var h=this,f=h.settings,c={};if(!a)return c;e(a.split(";"),function(a){var d,b=[];a&&(a=a.replace(/url\([^\)]+\)/g,function(a){b.push(a);return"url("+b.length+")"}),a=a.split(":"),d=tinymce.trim(a[1]),d=d.replace(/url\(([^\)]+)\)/g,function(a,d){return b[parseInt(d)-1]}),d=d.replace(/rgb\([^\)]+\)/g,function(a){return h.toHex(a)}),f.url_converter&&(d=d.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(a,d){return"url("+h.encode(f.url_converter.call(f.url_converter_scope||
h,h.decode(d),"style",null))+")"})),c[tinymce.trim(a[0]).toLowerCase()]=d)});d("border","","border");d("border","-width","border-width");d("border","-color","border-color");d("border","-style","border-style");d("padding","","padding");d("margin","","margin");(function(a,d,f,h){var b;if(b=c[d])if(b=c[f])if(b=c[h])c[a]=c[d]+" "+c[f]+" "+c[h],delete c[d],delete c[f],delete c[h]})("border","border-width","border-style","border-color");if(b&&c.border=="medium none")c.border="";return c},serializeStyle:function(a){var d=
"";e(a,function(a,f){if(f&&a){switch(f){case "color":case "background-color":a=a.toLowerCase()}d+=(d?" ":"")+f+": "+a+";"}});return d},loadCSS:function(a){var d=this;a||(a="");e(a.split(","),function(a){d.files[a]||(d.files[a]=!0,d.add(d.select("head")[0],"link",{rel:"stylesheet",href:tinymce._addVer(a)}))})},addClass:function(a,d){return this.run(a,function(a){var f;if(!d)return 0;if(this.hasClass(a,d))return a.className;f=this.removeClass(a,d);return a.className=(f!=""?f+" ":"")+d})},removeClass:function(a,
d){var b=this,f;return b.run(a,function(a){var c;return b.hasClass(a,d)?(f||(f=RegExp("(^|\\s+)"+d+"(\\s+|$)","g")),c=a.className.replace(f," "),a.className=tinymce.trim(c!=" "?c:"")):a.className})},hasClass:function(a,d){a=this.get(a);return!a||!d?!1:(" "+a.className+" ").indexOf(" "+d+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return a.style.display=="none"||this.getStyle(a,
"display")=="none"},uniqueId:function(a){return(!a?"mce_":a)+this.counter++},setHTML:function(a,d){var h=this;return this.run(a,function(a){var c,i,g,l,m;d=h.processHTML(d);if(b){var n=function(){try{a.innerHTML="<br />"+d,a.removeChild(a.firstChild)}catch(b){for(;a.firstChild;)a.firstChild.removeNode();c=h.create("div");c.innerHTML="<br />"+d;e(c.childNodes,function(d,b){b&&a.appendChild(d)})}};h.settings.fix_ie_paragraphs&&(d=d.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>'));
n();if(h.settings.fix_ie_paragraphs){g=a.getElementsByTagName("p");for(i=g.length-1,c=0;i>=0;i--)if(l=g[i],!l.hasChildNodes()){if(!l.mce_keep){c=1;break}l.removeAttribute("mce_keep")}}if(c&&(d=d.replace(/<p([^>]+)>|<p>/g,'<div$1 mce_tmp="1">'),d=d.replace(/<\/p>/g,"</div>"),n(),h.settings.fix_ie_paragraphs)){g=a.getElementsByTagName("DIV");for(i=g.length-1;i>=0;i--)if(l=g[i],l.mce_tmp){m=h.doc.createElement("p");l.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(a,d){var f;if(d!=="mce_tmp"){f=
l.getAttribute(d);if(!f&&d==="class")f=l.className;m.setAttribute(d,f)}});for(c=0;c<l.childNodes.length;c++)m.appendChild(l.childNodes[c].cloneNode(!0));l.swapNode(m)}}}else a.innerHTML=d;return d})},processHTML:function(a){var d=this,h=d.settings;if(!h.process_html)return a;tinymce.isGecko?(a=a.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>"),a=a.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")):b&&(a=a.replace(/&apos;/g,"&#39;"));a=a.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");h.keep_values&&
(a.indexOf("<script")!==-1&&(a=a.replace(/<script>/g,'<script type="text/javascript">'),a=a.replace(/<script(|[^>]+)>(\s*<\!--|\/\/\s*<\[CDATA\[)?[\r\n]*/g,"<mce:script$1><\!--\n"),a=a.replace(/\s*(\/\/\s*--\>|\/\/\s*]]\>)?<\/script>/g,"\n// --\></mce:script>"),a=a.replace(/<mce:script(|[^>]+)><\!--\n\/\/ --\><\/mce:script>/g,"<mce:script$1></mce:script>")),a=a.replace(/<([\w:]+) [^>]*(src|href|style|coords)[^>]*>/gi,function(a,b){function c(e,i,g){var n=g;if(a.indexOf("mce_"+i)!=-1)return e;if(i==
"style"){if(d._isRes(g))return e;h.hex_colors&&(n=n.replace(/rgb\([^\)]+\)/g,function(a){return d.toHex(a)}));h.url_converter&&(n=n.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(a,f){return"url("+d.encode(h.url_converter.call(h.url_converter_scope||d,d.decode(f),i,b))+")"}))}else i!="coords"&&h.url_converter&&(n=d.encode(h.url_converter.call(h.url_converter_scope||d,d.decode(g),i,b)));return" "+i+'="'+g+'" mce_'+i+'="'+n+'"'}a=a.replace(/ (src|href|style|coords)=[\"]([^\"]+)[\"]/gi,c);a=a.replace(/ (src|href|style|coords)=[\']([^\']+)[\']/gi,
c);return a.replace(/ (src|href|style|coords)=([^\s\"\'>]+)/gi,c)}));return a},getOuterHTML:function(a){var d,a=this.get(a);if(!a)return null;if(b)return a.outerHTML;d=(a.ownerDocument||this.doc).createElement("body");d.appendChild(a.cloneNode(!0));return d.innerHTML},setOuterHTML:function(a,d,h){var f=this;return this.run(a,function(a){var c,a=f.get(a);h=h||a.ownerDocument||f.doc;if(b&&a.nodeType==1)a.outerHTML=d;else{c=h.createElement("body");c.innerHTML=d;for(c=c.lastChild;c;)f.insertAfter(c.cloneNode(!0),
a),c=c.previousSibling;f.remove(a)}})},decode:function(a){var d;return/&[^;]+;/.test(a)?(d=this.doc.createElement("div"),d.innerHTML=a,!d.firstChild?a:d.firstChild.nodeValue):a},encode:function(a){return a?(""+a).replace(/[<>&\"]/g,function(a){switch(a){case "&":return"&amp;";case '"':return"&quot;";case "<":return"&lt;";case ">":return"&gt;"}return a}):a},insertAfter:function(a,d){d=this.get(d);return this.run(a,function(a){var f,b;f=d.parentNode;(b=d.nextSibling)?f.insertBefore(a,b):f.appendChild(a);
return a})},isBlock:function(a){if(a.nodeType&&a.nodeType!==1)return!1;a=a.nodeName||a;return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(a)},replace:function(a,d,b){c(d,"array")&&(a=a.cloneNode(!0));return this.run(d,function(d){b&&e(d.childNodes,function(d){a.appendChild(d.cloneNode(!0))});return d.parentNode.replaceChild(a,d)})},toHex:function(a){function d(a){a=parseInt(a).toString(16);return a.length>
1?a:"0"+a}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);b&&(a="#"+d(b[1])+d(b[2])+d(b[3]));return a},getClasses:function(){function a(i){e(i.imports,function(d){a(d)});e(i.cssRules||i.rules,function(i){switch(i.type||1){case 1:i.selectorText&&e(i.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");if(!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(c=a,a=a.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!f||(a=f(a,c)))&&!b[a]))d.push({"class":a}),b[a]=1});
break;case 3:a(i.styleSheet)}})}var d=[],b={},f=this.settings.class_filter,c;if(this.classes)return this.classes;try{e(this.doc.styleSheets,a)}catch(i){}if(d.length>0)this.classes=d;return d},run:function(a,d,b){var f=this,c;f.doc&&typeof a==="string"&&(a=f.doc.getElementById(a));if(!a)return!1;b=b||this;return!a.nodeType&&(a.length||a.length===0)?(c=[],e(a,function(a,e){a&&(typeof a=="string"&&(a=f.doc.getElementById(a)),c.push(d.call(b,a,e)))}),c):d.call(b,a)},getAttribs:function(a){var d,a=this.get(a);
if(!a)return[];if(b){d=[];if(a.nodeName=="OBJECT")return a.attributes;a.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(a,f){d.push({specified:1,nodeName:f})});return d}return a.attributes},destroy:function(a){this.win=this.doc=this.root=null;a||tinymce.removeUnload(this.destroy)},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/^[;\s](top|left|bottom|right|width|height)/i.test(a)}});tinymce.DOM=new tinymce.dom.DOMUtils(document,{process_html:0})})();
(function(){var e=tinymce.each,c=tinymce.DOM,g=tinymce.isIE,b=tinymce.isWebKit,a;tinymce.create("static tinymce.dom.Event",{inits:[],events:[],add:function(a,b,f,j){var i,k=this,l=k.events,m;if(a&&a instanceof Array)return m=[],e(a,function(a){a=c.get(a);m.push(k.add(a,b,f,j))}),m;if(a=c.get(a)){i=function(a){if((a=a||window.event)&&!a.target&&g)a.target=a.srcElement;return!j?f(a):f.call(j,a)};if(b=="unload")return tinymce.unloads.unshift({func:i}),i;if(b=="init")return k.domLoaded?i():k.inits.push(i),
i;l.push({obj:a,name:b,func:f,cfunc:i,scope:j});k._add(a,b,i);return f}},remove:function(a,b,f){var j=this,i=j.events,g=!1,l;if(a&&a instanceof Array)return l=[],e(a,function(a){a=c.get(a);l.push(j.remove(a,b,f))}),l;a=c.get(a);e(i,function(c,e){if(c.obj==a&&c.name==b&&(!f||c.func==f||c.cfunc==f))return i.splice(e,1),j._remove(a,b,c.cfunc),g=!0,!1});return g},clear:function(a){var b=this.events,f,e;if(a){a=c.get(a);for(f=b.length-1;f>=0;f--)if(e=b[f],e.obj===a)this._remove(e.obj,e.name,e.cfunc),e.obj=
e.cfunc=null,b.splice(f,1)}},cancel:function(a){if(!a)return!1;this.stop(a);return this.prevent(a)},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},_unload:function(){var d=a;e(d.events,function(a){d._remove(a.obj,a.name,a.cfunc);a.obj=a.cfunc=null});d.events=[];d=null},_add:function(a,b,f){a.attachEvent?a.attachEvent("on"+b,f):a.addEventListener?a.addEventListener(b,f,!1):a["on"+
b]=f},_remove:function(a,b,f){if(a)try{a.detachEvent?a.detachEvent("on"+b,f):a.removeEventListener?a.removeEventListener(b,f,!1):a["on"+b]=null}catch(c){}},_pageInit:function(){var d=a;d._remove(window,"DOMContentLoaded",d._pageInit);d.domLoaded=!0;e(d.inits,function(a){a()});d.inits=[]},_wait:function(){var d;if(!window.tinyMCE_GZ||!tinyMCE_GZ.loaded)if(g&&document.location.protocol!="https:")document.write("<script id=__ie_onload defer src='javascript:\"\"';><\/script>"),c.get("__ie_onload").onreadystatechange=
function(){if(this.readyState=="complete")a._pageInit(),c.get("__ie_onload").onreadystatechange=null};else if(a._add(window,"DOMContentLoaded",a._pageInit,a),g||b)d=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(d),a._pageInit())},10)}});a=tinymce.dom.Event;a._wait();tinymce.addUnload(a._unload)})();
(function(){var e=tinymce.each;tinymce.create("tinymce.dom.Element",{Element:function(c,g){var b=this,a,d,g=g||{};b.id=c;b.dom=a=g.dom||tinymce.DOM;b.settings=g;tinymce.isIE||(d=b.dom.get(b.id));e("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(","),function(h){b[h]=function(){var f=arguments,j;tinymce.isOpera?(f=[c],e(arguments,function(a){f.push(a)})):Array.prototype.unshift.call(f,
d||c);j=a[h].apply(a,f);b.update(h);return j}})},on:function(c,e,b){return tinymce.dom.Event.add(this.id,c,e,b)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var c=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||c.clientWidth),h:parseInt(this.getStyle("height")||c.clientHeight)}},moveTo:function(c,e){this.setStyles({left:c,top:e})},moveBy:function(c,e){var b=this.getXY();this.moveTo(b.x+c,b.y+e)},resizeTo:function(c,
e){this.setStyles({width:c,height:e})},resizeBy:function(c,e){var b=this.getSize();this.resizeTo(b.w+c,b.h+e)},update:function(c){var e=this.dom;if(tinymce.isIE6&&this.settings.blocker&&(c=c||"",!(c.indexOf("get")===0||c.indexOf("has")===0||c.indexOf("is")===0)))c=="remove"?e.remove(this.blocker):(this.blocker?c=e.get(this.blocker):(this.blocker=e.uniqueId(),c=e.add(this.settings.container||e.getRoot(),"iframe",{id:this.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(c,
"opacity",0)),e.setStyle(c,"left",this.getStyle("left",1)),e.setStyle(c,"top",this.getStyle("top",1)),e.setStyle(c,"width",this.getStyle("width",1)),e.setStyle(c,"height",this.getStyle("height",1)),e.setStyle(c,"display",this.getStyle("display",1)),e.setStyle(c,"zIndex",parseInt(this.getStyle("zIndex",1)||0)-1))}})})();
(function(){var e=tinymce.is,c=tinymce.isIE,g=tinymce.each;tinymce.create("tinymce.dom.Selection",{Selection:function(b,a,d){this.dom=b;this.win=a;this.serializer=d;tinymce.addUnload(this.destroy,this)},getContent:function(b){var a=this.getRng(),d=this.dom.create("body"),c=this.getSel(),f,j,b=b||{};f=j="";b.get=!0;b.format=b.format||"html";if(b.format=="text")return this.isCollapsed()?"":a.text||(c.toString?c.toString():"");a.cloneContents?(a=a.cloneContents())&&d.appendChild(a):d.innerHTML=e(a.item)||
e(a.htmlText)?a.item?a.item(0).outerHTML:a.htmlText:a.toString();/^\s/.test(d.innerHTML)&&(f=" ");/\s+$/.test(d.innerHTML)&&(j=" ");b.getInner=!0;return this.isCollapsed()?"":f+this.serializer.serialize(d,b)+j},setContent:function(b,a){var d=this.getRng(),c,a=a||{format:"html"};a.set=!0;b=this.dom.processHTML(b);if(d.insertNode)if(c=this.win.document,tinymce.isGecko&&b.indexOf("<")==-1)d.deleteContents(),d.insertNode(this.getRng().createContextualFragment(b+'<span id="__caret">_</span>')),this.select(this.dom.get("__caret")),
this.getRng().deleteContents();else try{if(c.queryCommandEnabled("InsertHTML"))return c.execCommand("InsertHTML",!1,b)}catch(f){d.deleteContents(),d.insertNode(this.getRng().createContextualFragment(b))}else d.item?d.item(0).outerHTML=b:d.pasteHTML(b)},getStart:function(){var b=this.getRng();if(c){if(b.item)return b.item(0);b=b.duplicate();b.collapse(1);return(b=b.parentElement())&&b.nodeName=="BODY"?b.firstChild:b}else return b=b.startContainer,b.nodeName=="BODY"?b.firstChild:this.dom.getParent(b,
function(a){return a.nodeType==1})},getEnd:function(){var b=this.getRng();if(c){if(b.item)return b.item(0);b=b.duplicate();b.collapse(0);return(b=b.parentElement())&&b.nodeName=="BODY"?b.lastChild:b}else return b=b.endContainer,b.nodeName=="BODY"?b.lastChild:this.dom.getParent(b,function(a){return a.nodeType==1})},getBookmark:function(b){function a(a,f,b){for(var a=d.dom.doc.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1),c,e=0,h={};(c=a.nextNode())!=null;){if(c==f)h.start=e;if(c==b)return h.end=
e,h;e+=(c.nodeValue||"").length}return null}var d=this,h=d.getRng(),f,e;e=d.dom.getViewPort(d.win);var i,k,l;l=d.dom.getRoot();var m=0;f=e.x;e=e.y;if(b=="simple")return{rng:h,scrollX:f,scrollY:e};if(c){if(h.item)return i=h.item(0),g(d.dom.select(i.nodeName),function(a,d){if(i==a)return k=d,!1}),{tag:i.nodeName,index:k,scrollX:f,scrollY:e};b=d.dom.doc.body.createTextRange();b.moveToElementText(l);b.collapse(!0);l=Math.abs(b.move("character",-16777215));b=h.duplicate();b.collapse(!0);k=Math.abs(b.move("character",
-16777215));b=h.duplicate();b.collapse(!1);h=Math.abs(b.move("character",-16777215))-k;return{start:k-l,length:h,scrollX:f,scrollY:e}}i=d.getNode();b=d.getSel();if(!b)return null;if(i&&i.nodeName=="IMG")return{scrollX:f,scrollY:e};if(b.anchorNode==b.focusNode&&b.anchorOffset==b.focusOffset){i=a(l,b.anchorNode,b.focusNode);if(!i)return{scrollX:f,scrollY:e};(b.anchorNode.nodeValue||"").replace(/[\n\r]+/g,"").replace(/^\s+/,function(a){m=a.length});return{start:Math.max(i.start+b.anchorOffset-m,0),end:Math.max(i.end+
b.focusOffset-m,0),scrollX:f,scrollY:e,beg:b.anchorOffset-m==0}}else return i=a(l,h.startContainer,h.endContainer),!i?{scrollX:f,scrollY:e}:{start:Math.max(i.start+h.startOffset-m,0),end:Math.max(i.end+h.endOffset-0,0),scrollX:f,scrollY:e,beg:h.startOffset-m==0}},moveToBookmark:function(b){function a(a,f,c){for(var a=d.dom.doc.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1),e,h=0,o={},i;(e=a.nextNode())!=null;){l=e.nodeValue||"";k=l.replace(/[\n\r]+/g,"").length;h+=k;if(h>=f&&!o.startNode){i=f-(h-
k);if(b.beg&&i>=k)continue;o.startNode=e;o.startOffset=i+0}if(h>=c)return o.endNode=e,o.endOffset=c-(h-k)+0,o}return null}var d=this,h=d.getRng(),f=d.getSel(),j=d.dom.getRoot(),i,k,l;if(!b)return!1;d.win.scrollTo(b.scrollX,b.scrollY);if(c){if(h=b.rng){try{h.select()}catch(m){}return!0}d.win.focus();if(b.tag)h=j.createControlRange(),g(d.dom.select(b.tag),function(a,d){d==b.index&&h.addElement(a)});else try{if(b.start<0)return!0;h=f.createRange();h.moveToElementText(j);h.collapse(!0);h.moveStart("character",
b.start);h.moveEnd("character",b.length)}catch(n){return!0}try{h.select()}catch(p){}return!0}if(!f)return!1;if(b.rng)f.removeAllRanges(),f.addRange(b.rng);else if(e(b.start)&&e(b.end))try{if(i=a(j,b.start,b.end))h=d.dom.doc.createRange(),h.setStart(i.startNode,i.startOffset),h.setEnd(i.endNode,i.endOffset),f.removeAllRanges(),f.addRange(h);tinymce.isOpera||d.win.focus()}catch(o){}},select:function(b,a){function d(a){var d,f;if(!a)return null;for(f=i.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);a=
f.nextNode();)d=a;return d}var e=this.getRng();this.getSel();var f,j,i=this.win.document;if(c)try{f=i.body,/^(IMG|TABLE)$/.test(b.nodeName)?(e=f.createControlRange(),e.addElement(b)):(e=f.createTextRange(),e.moveToElementText(b)),e.select()}catch(g){}else a?(f=b?i.createTreeWalker(b,NodeFilter.SHOW_TEXT,null,!1).nextNode():null,j=d(b),f&&j?(e=i.createRange(),e.setStart(f,0),e.setEnd(j,j.nodeValue.length)):e.selectNode(b)):e.selectNode(b),this.setRng(e);return b},isCollapsed:function(){var b=this.getRng(),
a=this.getSel();return!b||b.item?!1:!a||b.boundingWidth==0||a.isCollapsed},collapse:function(b){var a=this.getRng(),d;a.item&&(d=a.item(0),a=this.win.document.body.createTextRange(),a.moveToElementText(d));a.collapse(!!b);this.setRng(a)},getSel:function(){var b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(){var b=this.getSel(),a;try{b&&(a=b.rangeCount>0?b.getRangeAt(0):b.createRange?b.createRange():this.win.document.createRange())}catch(d){}a||(a=c?this.win.document.body.createTextRange():
this.win.document.createRange());return a},setRng:function(b){var a;if(c)try{b.select()}catch(d){}else if(a=this.getSel())a.removeAllRanges(),a.addRange(b)},setNode:function(b){this.setContent(this.dom.getOuterHTML(b));return b},getNode:function(){var b=this.getRng();this.getSel();var a;if(!c){if(!b)return this.dom.getRoot();a=b.commonAncestorContainer;if(!b.collapsed&&(b.startContainer==b.endContainer||tinymce.isWebKit&&b.startContainer==b.endContainer.parentNode))if(b.startOffset-b.endOffset<2||
tinymce.isWebKit)b.startContainer.hasChildNodes()&&(a=b.startContainer.childNodes[b.startOffset]);return this.dom.getParent(a,function(a){return a.nodeType==1})}return b.item?b.item(0):b.parentElement()},destroy:function(b){this.win=null;b||tinymce.removeUnload(this.destroy)}})})();
(function(){tinymce.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){this.doc=function(){var e=document.implementation;if(!e||!e.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(c){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(g){}}else return e.createDocument("","",null)}();this.valid=tinymce.isOpera||tinymce.isWebKit;this.reset()},reset:function(){var e=this.doc;e.firstChild&&e.removeChild(e.firstChild);this.node=e.appendChild(e.createElement("html"))},
writeStartElement:function(e){this.node=this.node.appendChild(this.doc.createElement(e))},writeAttribute:function(e,c){this.valid&&(c=c.replace(/>/g,"%MCGT%"));this.node.setAttribute(e,c)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var e=this.node;e.appendChild(this.doc.createTextNode(""));this.node=e.parentNode},writeText:function(e){this.valid&&(e=e.replace(/>/g,"%MCGT%"));this.node.appendChild(this.doc.createTextNode(e))},writeCDATA:function(e){this.node.appendChild(this.doc.createCDATA(e))},
writeComment:function(e){this.node.appendChild(this.doc.createComment(e.replace(/\-\-/g," ")))},getContent:function(){var e;e=this.doc.xml||(new XMLSerializer).serializeToString(this.doc);e=e.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");e=e.replace(/ ?\/>/g," />");this.valid&&(e=e.replace(/\%MCGT%/g,"&gt;"));return e}})})();
(function(){tinymce.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(e){this.settings=tinymce.extend({indent_char:" ",indentation:1},e);this.reset()},reset:function(){this.str=this.indent="";this.tags=[];this.count=0},writeStartElement:function(e){this._writeAttributesEnd();this.writeRaw("<"+e);this.tags.push(e);this.inAttr=!0;this.count++;this.elementCount=this.count},writeAttribute:function(e,c){this.writeRaw(" "+this.encode(e)+'="'+this.encode(c)+
'"')},writeEndElement:function(){var e;this.tags.length>0&&(e=this.tags.pop(),this._writeAttributesEnd(1)&&this.writeRaw("</"+e+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeFullEndElement:function(){this.tags.length>0&&(this._writeAttributesEnd(),this.writeRaw("</"+this.tags.pop()+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeText:function(e){this._writeAttributesEnd();this.writeRaw(this.encode(e));this.count++},writeCDATA:function(e){this._writeAttributesEnd();this.writeRaw("<![CDATA["+
e+"]]\>");this.count++},writeComment:function(e){this._writeAttributesEnd();this.writeRaw("<\!-- "+e+"--\>");this.count++},writeRaw:function(e){this.str+=e},encode:function(e){return e.replace(/[<>&"]/g,function(c){switch(c){case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;";case '"':return"&quot;"}return c})},getContent:function(){return this.str},_writeAttributesEnd:function(e){if(this.inAttr){this.inAttr=!1;if(e&&this.elementCount==this.count)return this.writeRaw(" />"),!1;this.writeRaw(">");
return!0}}})})();
(function(){function e(a){var d=[];if(a.nodeName=="OBJECT")return a.attributes;a.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(a,f){d.push({specified:1,nodeName:f})});return d}function c(a){return a.replace(/([?+*])/g,".$1")}var g=tinymce.extend,b=tinymce.each,a=tinymce.util.Dispatcher,d=tinymce.isIE,h=tinymce.isGecko;tinymce.create("tinymce.dom.Serializer",{Serializer:function(d){var c=this;c.key=0;c.onPreProcess=new a(c);c.onPostProcess=new a(c);if(tinymce.relaxedDomain&&tinymce.isGecko)c.writer=
new tinymce.dom.StringWriter;else try{c.writer=new tinymce.dom.XMLWriter}catch(e){c.writer=new tinymce.dom.StringWriter}c.settings=d=g({dom:tinymce.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_)/,closed:/(br|hr|input|meta|img|link|param)/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",
valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:0,fix_list_elements:!0,fix_content_duplication:!0,convert_fonts_to_spans:!1,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1},d);c.dom=d.dom;d.fix_list_elements&&c.onPreProcess.add(function(a,d){function f(a,d){for(var b=d.split(","),c;(a=a.previousSibling)!=null;)for(c=0;c<b.length;c++)if(a.nodeName==
b[c])return a;return null}var b,e,h=["ol","ul"],i,g,r,q=/^(OL|UL)$/,t;for(e=0;e<h.length;e++){b=c.dom.select(h[e],d.node);for(i=0;i<b.length;i++)if(g=b[i],r=g.parentNode,q.test(r.nodeName))(t=f(g,"LI"))?t.appendChild(g):(t=c.dom.create("li"),t.innerHTML="&nbsp;",t.appendChild(g),r.insertBefore(t,r.firstChild))}});d.fix_table_elements&&c.onPreProcess.add(function(a,d){b(c.dom.select("table",d.node),function(a){var d=c.dom.getParent(a,"H1,H2,H3,H4,H5,H6,P"),f,b,e,h=[],i,g;if(d){f=d.cloneNode(!1);h.push(a);
for(b=a;b=b.parentNode;)if(h.push(b),b==d)break;e=f;for(i=h.length-1;i>=0;i--)if(i==h.length-1)for(;g=h[i-1].nextSibling;)e.appendChild(g.parentNode.removeChild(g));else{b=h[i].cloneNode(!1);if(i!=0)for(;g=h[i-1].nextSibling;)b.appendChild(g.parentNode.removeChild(g));e=e.appendChild(b)}a=c.dom.insertAfter(a.parentNode.removeChild(a),d);c.dom.insertAfter(a,d);c.dom.insertAfter(f,a)}})})},setEntities:function(a){var d,b={},c="",e;if(!this.entityLookup){a=a.split(",");for(d=0;d<a.length;d+=2)e=a[d],
e==34||e==38||e==60||e==62||(b[String.fromCharCode(a[d])]=a[d+1],e=parseInt(a[d]).toString(16),c+="\\u"+"0000".substring(e.length)+e);c?(this.entitiesRE=RegExp("["+c+"]","g"),this.entityLookup=b):this.settings.entity_encoding="raw"}},setValidChildRules:function(a){this.childRules=null;this.addValidChildRules(a)},addValidChildRules:function(a){var d=this;if(a)b(a.split(","),function(a){var f=a.split(/\[|\]/),c,a="";b(f[1].split("|"),function(d){a&&(a+="|");switch(d){case "%itrans":d="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment";
break;case "%itrans_na":d="BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment";break;case "%istrict":d="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment";break;case "%istrict_na":d="BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment";
break;case "%btrans":d="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP";break;case "%bstrict":d="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP"}a+=d});c=RegExp("^("+a.toLowerCase()+")$","i");b(f[0].split("/"),function(a){d.childRules=d.childRules||{};d.childRules[a]=c})}),a="",b(d.childRules,function(d,b){a&&(a+="|");a+=
b}),d.parentElementsRE=RegExp("^("+a.toLowerCase()+")$","i")},setRules:function(a){this._setup();this.rules={};this.wildRules=[];this.validElements={};return this.addRules(a)},addRules:function(a){var d=this,e;if(a)d._setup(),b(a.split(","),function(a){var a=a.split(/\[|\]/),f=a[0].split("/"),h,g,p,o=[];e&&(g=tinymce.extend([],e.attribs));a.length>1&&b(a[1].split("|"),function(a){var d={},b;g=g||[];a=a.replace(/::/g,"~");a=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(a);a[2]=a[2].replace(/~/g,":");
a[1]=="!"&&(h=h||[],h.push(a[2]));if(a[1]=="-")for(b=0;b<g.length;b++)if(g[b].name==a[2]){g.splice(b,1);return}switch(a[3]){case "=":d.defaultVal=a[4]||"";break;case ":":d.forcedVal=a[4];break;case "<":d.validVals=a[4].split("?")}/[*.?]/.test(a[2])?(p=p||[],d.nameRE=RegExp("^"+c(a[2])+"$"),p.push(d)):(d.name=a[2],g.push(d));o.push(a[2])});b(f,function(a,k){var r=a.charAt(0),q=1,t={};if(e){if(e.noEmpty)t.noEmpty=e.noEmpty;if(e.fullEnd)t.fullEnd=e.fullEnd;if(e.padd)t.padd=e.padd}switch(r){case "-":t.noEmpty=
!0;break;case "+":t.fullEnd=!0;break;case "#":t.padd=!0;break;default:q=0}f[k]=a=a.substring(q);d.validElements[a]=1;/[*.?]/.test(f[0])?(t.nameRE=RegExp("^"+c(f[0])+"$"),d.wildRules=d.wildRules||{},d.wildRules.push(t)):(t.name=f[0],f[0]=="@"&&(e=t),d.rules[a]=t);t.attribs=g;if(h)t.requiredAttribs=h;if(p)a="",b(o,function(d){a&&(a+="|");a+="("+c(d)+")"}),t.validAttribsRE=RegExp("^"+a.toLowerCase()+"$"),t.wildAttribs=p})}),a="",b(d.validElements,function(d,b){a&&(a+="|");b!="@"&&(a+=b)}),d.validElementsRE=
RegExp("^("+c(a.toLowerCase())+")$")},findRule:function(a){var d=this.rules,b;this._setup();if(d=d[a])return d;d=this.wildRules;for(b=0;b<d.length;b++)if(d[b].nameRE.test(a))return d[b];return null},findAttribRule:function(a,d){var b,c=a.wildAttribs;for(b=0;b<c.length;b++)if(c[b].nameRE.test(d))return c[b];return null},serialize:function(a,d){this._setup();d=d||{};d.format=d.format||"html";this.processObj=d;a=a.cloneNode(!0);this.key=""+(parseInt(this.key)+1);if(!d.no_events)d.node=a,this.onPreProcess.dispatch(this,
d);this.writer.reset();this._serializeNode(a,d.getInner);d.content=this.writer.getContent();d.no_events||this.onPostProcess.dispatch(this,d);this._postProcess(d);d.node=null;return tinymce.trim(d.content)},_postProcess:function(a){var d=this.settings,b=a.content,c;if(a.format=="html")c=this._protect({content:b,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1}]}),b=c.content,d.entity_encoding!=="raw"&&
(b=this._encode(b)),a.set||(b=b.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,d.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>"),d.remove_linebreaks&&(b=b.replace(/\r?\n|\r/g," "),b=b.replace(/(<[^>]+>)\s+/g,"$1 "),b=b.replace(/\s+(<\/[^>]+>)/g," $1"),b=b.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>"),b=b.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,
"<$1>"),b=b.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")),d.apply_source_formatting&&d.indent_mode=="simple"&&(b=b.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n"),b=b.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>"),b=b.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n"),b=b.replace(/\n\n/g,
"\n"))),b=this._unprotect(b,c),d.entity_encoding=="raw"&&(b=b.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>"));a.content=b},_serializeNode:function(a,b){var c=this.settings,g=this.writer,l,m,n,p,o,u,s,r,q;if(!c.node_filter||c.node_filter(a))switch(a.nodeType){case 1:if(a.hasAttribute?a.hasAttribute("mce_bogus"):a.getAttribute("mce_bogus"))return;q=!1;l=a.hasChildNodes();s=a.getAttribute("mce_name")||a.nodeName.toLowerCase();d&&a.scopeName!=="HTML"&&a.scopeName!=="html"&&(s=a.scopeName+
":"+s);s.indexOf("mce:")===0&&(s=s.substring(4));if(!this.validElementsRE.test(s)||this.invalidElementsRE&&this.invalidElementsRE.test(s)||b){q=!0;break}if(d){if(c.fix_content_duplication){if(a.mce_serialized==this.key)return;a.mce_serialized=this.key}s.charAt(0)=="/"&&(s=s.substring(1))}else if(h&&a.nodeName==="BR"&&a.getAttribute("type")=="_moz")return;if(this.childRules){if(this.parentElementsRE.test(this.elementName)&&!this.childRules[this.elementName].test(s)){q=!0;break}this.elementName=s}r=
this.findRule(s);s=r.name||s;if(!l&&r.noEmpty||d&&!s){q=!0;break}if(r.requiredAttribs){p=r.requiredAttribs;for(m=p.length-1;m>=0;m--)if(this.dom.getAttrib(a,p[m])!=="")break;if(m==-1){q=!0;break}}g.writeStartElement(s);if(r.attribs)for(m=0,o=r.attribs,n=o.length;m<n;m++)p=o[m],u=this._getAttrib(a,p),u!==null&&g.writeAttribute(p.name,u);if(r.validAttribsRE){o=d?e(a):a.attributes;for(m=o.length-1;m>-1;m--)p=o[m],p.specified&&(p=p.nodeName.toLowerCase(),!c.invalid_attrs.test(p)&&r.validAttribsRE.test(p)&&
(n=this.findAttribRule(r,p),u=this._getAttrib(a,n,p),u!==null&&g.writeAttribute(p,u)))}!l&&r.padd&&g.writeText("\u00a0");break;case 3:return this.childRules&&this.parentElementsRE.test(this.elementName)&&!this.childRules[this.elementName].test(a.nodeName)?void 0:g.writeText(a.nodeValue);case 4:return g.writeCDATA(a.nodeValue);case 8:return g.writeComment(a.nodeValue)}else a.nodeType==1&&(l=a.hasChildNodes());if(l)for(m=a.firstChild;m;)this._serializeNode(m),this.elementName=s,m=m.nextSibling;q||(l||
!c.closed.test(s)?g.writeFullEndElement():g.writeEndElement())},_protect:function(a){function d(a){return a.replace(/[\r\n\\]/g,function(a){if(a==="\n")return"\\n";else if(a==="\\")return"\\\\";return"\\r"})}function c(a){return a.replace(/\\[\\rn]/g,function(a){if(a==="\\n")return"\n";else if(a==="\\\\")return"\\";return"\r"})}var e=this;a.items=a.items||[];b(a.patterns,function(b){a.content=c(d(a.content).replace(b.pattern,function(d,h,g,o){g=c(g);b.encode&&(g=e._encode(g));a.items.push(g);return h+
"<\!--mce:"+(a.items.length-1)+"--\>"+o}))});return a},_unprotect:function(a,d){a=a.replace(/\<\!--mce:([0-9]+)--\>/g,function(a,b){return d.items[parseInt(b)]});d.items=[];return a},_encode:function(a){var d=this.settings,b;if(d.entity_encoding!=="raw"){if(d.entity_encoding.indexOf("named")!=-1)this.setEntities(d.entities),b=this.entityLookup,a=a.replace(this.entitiesRE,function(a){var d;if(d=b[a])a="&"+d+";";return a});d.entity_encoding.indexOf("numeric")!=-1&&(a=a.replace(/[\u007E-\uFFFF]/g,function(a){return"&#"+
a.charCodeAt(0)+";"}))}return a},_setup:function(){var a=this.settings;if(!this.done){this.done=1;this.setRules(a.valid_elements);this.addRules(a.extended_valid_elements);this.addValidChildRules(a.valid_child_elements);if(a.invalid_elements)this.invalidElementsRE=RegExp("^("+c(a.invalid_elements.replace(",","|").toLowerCase())+")$");if(a.attrib_value_filter)this.attribValueFilter=a.attribValueFilter}},_getAttrib:function(a,d,b){var c,b=b||d.name;if(d.forcedVal&&(c=d.forcedVal))return c==="{$uid}"?
this.dom.uniqueId():c;c=this.dom.getAttrib(a,b);switch(b){case "rowspan":case "colspan":c=="1"&&(c="")}this.attribValueFilter&&(c=this.attribValueFilter(b,c,a));if(d.validVals){for(a=d.validVals.length-1;a>=0;a--)if(c==d.validVals[a])break;if(a==-1)return null}if(c===""&&typeof d.defaultVal!="undefined")return c=d.defaultVal,c==="{$uid}"?this.dom.uniqueId():c;else b=="class"&&this.processObj.get&&(c=c.replace(/\s?mceItem\w+\s?/g,""));return c===""?null:c}})})();
(function(){var e=tinymce.each;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(c){this.settings=c||{};this.queue=[];this.lookup={}},isDone:function(c){return this.lookup[c]?this.lookup[c].state==2:0},markDone:function(c){this.lookup[c]={state:2,url:c}},add:function(c,e,b,a){var d=this.lookup,h;if(h=d[c])return e&&h.state==2&&e.call(b||this),h;h={state:0,url:c,func:e,scope:b||this};a?this.queue.unshift(h):this.queue.push(h);return d[c]=h},load:function(c,g,b){function a(a){tinymce.dom.Event.domLoaded||
d.settings.strict_mode?tinymce.util.XHR.send({url:tinymce._addVer(a),error:d.settings.error,async:!1,success:function(a){d.eval(a)}}):document.write('<script type="text/javascript" src="'+tinymce._addVer(a)+'"><\/script>')}var d=this,h;if(h=d.lookup[c])return g&&h.state==2&&g.call(b||d),h;tinymce.is(c,"string")?a(c):e(c,function(d){a(d)});g&&g.call(b||d)},loadQueue:function(c,g){var b=this;b.queueLoading?c&&b.queueCallbacks.push({func:c,scope:g||b}):(b.queueLoading=1,b.queueCallbacks=[],b.loadScripts(b.queue,
function(){b.queueLoading=0;c&&c.call(g||b);e(b.queueCallbacks,function(a){a.func.call(a.scope)})}))},eval:function(c){var e=window;if(e.execScript)e.execScript(c);else try{eval.call(e,c)}catch(b){eval(c,e)}},loadScripts:function(c,g,b){function a(a){a.state=2;a.func&&a.func.call(a.scope||f)}function d(){var d;d=c.length;e(c,function(b){b=j[b.url];b.state===2?(a(b),d--):h(b)});d===0&&g&&(g.call(b||f),g=0)}function h(b){if(!(b.state>0))b.state=1,tinymce.util.XHR.send({url:b.url,error:f.settings.error,
success:function(c){f.eval(c);a(b);d()}})}var f=this,j=f.lookup;e(c,function(b){var c=b.url;j[c]?b=j[c]:(j[c]=b,f.queue.push(b));if(!(b.state>0))if(!tinymce.dom.Event.domLoaded&&!f.settings.strict_mode){var e,m="";if(g||b.func)b.state=1,e=tinymce.dom.ScriptLoader._addOnLoad(function(){a(b);d()}),m=tinymce.isIE?' onreadystatechange="':' onload="',m+="tinymce.dom.ScriptLoader._onLoad(this,'"+c+"',"+e+');"';document.write('<script type="text/javascript" src="'+tinymce._addVer(c)+'"'+m+"><\/script>");
b.func||a(b)}else h(b)});d()},"static":{_addOnLoad:function(c){this._funcs=this._funcs||[];this._funcs.push(c);return this._funcs.length-1},_onLoad:function(c,e,b){(!tinymce.isIE||c.readyState=="complete")&&this._funcs[b].call(this)}}});tinymce.ScriptLoader=new tinymce.dom.ScriptLoader})();
(function(){var e=tinymce.DOM,c=tinymce.is;tinymce.create("tinymce.ui.Control",{Control:function(c,b){this.id=c;this.settings=b=b||{};this.rendered=!1;this.onRender=new tinymce.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0},setDisabled:function(c){var b;if(c!=this.disabled){if((b=e.get(this.id))&&this.settings.unavailable_prefix)c?(this.prevTitle=b.title,b.title=this.settings.unavailable_prefix+": "+b.title):b.title=this.prevTitle;this.setState("Disabled",
c);this.setState("Enabled",!c);this.disabled=c}},isDisabled:function(){return this.disabled},setActive:function(c){if(c!=this.active)this.setState("Active",c),this.active=c},isActive:function(){return this.active},setState:function(c,b){var a=e.get(this.id),c=this.classPrefix+c;b?e.addClass(a,c):e.removeClass(a,c)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(c){e.setHTML(c,this.renderHTML())},postRender:function(){var e;if(c(this.disabled))e=this.disabled,
this.disabled=-1,this.setDisabled(e);if(c(this.active))e=this.active,this.active=-1,this.setActive(e)},remove:function(){e.remove(this.id);this.destroy()},destroy:function(){tinymce.dom.Event.clear(this.id)}})})();tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,c){this.parent(e,c);this.controls=[];this.lookup={}},add:function(e){this.lookup[e.id]=e;this.controls.push(e);return e},get:function(e){return this.lookup[e]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,c){this.parent(e,c);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});
(function(){var e=tinymce.is;tinymce.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(c,e){this.parent(c,e);this.classPrefix="mceMenuItem"},setSelected:function(c){this.setState("Selected",c);this.selected=c},isSelected:function(){return this.selected},postRender:function(){this.parent();e(this.selected)&&this.setSelected(this.selected)}})})();
(function(){var e=tinymce.DOM,c=tinymce.walk;tinymce.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(c,b){this.parent(c,b);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new tinymce.util.Dispatcher(this)},expand:function(e){e&&c(this,function(b){b.expand&&b.expand()},"items",this);this.collapsed=!1},collapse:function(e){e&&c(this,function(b){b.collapse&&b.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(c){c.settings||
(c=new tinymce.ui.MenuItem(c.id||e.uniqueId(),c));this.onAddItem.dispatch(this,c);return this.items[c.id]=c},addSeparator:function(){return this.add({separator:!0})},addMenu:function(c){c.collapse||(c=this.createMenu(c));this.menuCount++;return this.add(c)},hasMenus:function(){return this.menuCount!==0},remove:function(c){delete this.items[c.id]},removeAll:function(){c(this,function(c){c.removeAll?c.removeAll():c.remove();c.destroy()},"items",this);this.items={}},createMenu:function(c){c=new tinymce.ui.Menu(c.id||
e.uniqueId(),c);c.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return c}})})();
(function(){var e=tinymce.is,c=tinymce.DOM,g=tinymce.each,b=tinymce.dom.Event,a=tinymce.dom.Element;tinymce.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||c.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;e(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new tinymce.util.Dispatcher(this);this.onHideMenu=new tinymce.util.Dispatcher(this);this.classPrefix=
"mceMenu";this.fixIE=tinymce.isIE&&c.win.top!=c.win},createMenu:function(a){var b=this.settings;a.container=a.container||b.container;a.parent=this;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a=new tinymce.ui.DropMenu(a.id||c.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return a},update:function(){var a=this.settings,b=c.get("menu_"+this.id+"_tbl"),e=c.get("menu_"+
this.id+"_co"),g,i;g=a.max_width?Math.min(b.clientWidth,a.max_width):b.clientWidth;i=a.max_height?Math.min(b.clientHeight,a.max_height):b.clientHeight;c.boxModel?this.element.setStyles({width:g,height:i}):this.element.setStyles({width:g+2,height:i+2});a.max_width&&c.setStyle(e,"width",g);a.max_height&&(c.setStyle(e,"height",i),b.clientHeight<a.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(d,e,f){var j=this,i=j.settings,k,l=c.getViewPort(),m,n,p,o,u=j.classPrefix;j.collapse(1);
if(!j.isMenuVisible){j.rendered?k=c.get("menu_"+j.id):(k=c.add(j.settings.container,j.renderNode()),g(j.items,function(a){a.postRender()}),j.element=new a("menu_"+j.id,{blocker:1,container:i.container}));tinymce.isOpera||c.setStyles(k,{left:-65535,top:-65535});c.show(k);j.update();d+=i.offset_x||0;e+=i.offset_y||0;l.w-=4;l.h-=4;i.constrain&&(m=k.clientWidth-2,n=k.clientHeight-2,p=l.x+l.w,l=l.y+l.h,d+i.vp_offset_x+m>p&&(d=f?f-m:Math.max(0,p-i.vp_offset_x-m)),e+i.vp_offset_y+n>l&&(e=Math.max(0,l-i.vp_offset_y-
n)));c.setStyles(k,{left:d,top:e});j.element.update();j.isMenuVisible=1;j.mouseClickFunc=b.add(k,j.fixIE?"mousedown":"click",function(a){var d;if((a=a.target)&&(a=c.getParent(a,"TR"))&&!c.hasClass(a,u+"ItemSub"))if(d=j.items[a.id],!d.isDisabled())return o=j,c.win.setTimeout(function(){for(;o;)o.hideMenu&&o.hideMenu(),o=o.settings.parent},0),window.setTimeout(function(){if(d.settings.onclick)d.settings.onclick(a)},0),b.cancel(a)});if(j.hasMenus())j.mouseOverFunc=b.add(k,"mouseover",function(a){var d;
if((a=a.target)&&(a=c.getParent(a,"TR")))if(d=j.items[a.id],j.lastMenu&&j.lastMenu.collapse(1),!d.isDisabled()&&a&&c.hasClass(a,u+"ItemSub"))a=c.getRect(a),d.showMenu(a.x+a.w-2,a.y-2,a.x),j.lastMenu=d,c.addClass(c.get(d.id).firstChild,u+"ItemActive")});j.onShowMenu.dispatch(j);i.keyboard_focus&&(b.add(k,"keydown",j._keyHandler,j),c.select("a","menu_"+j.id)[0].focus())}},hideMenu:function(a){var e=c.get("menu_"+this.id),f;if(this.isMenuVisible)b.remove(e,"mouseover",this.mouseOverFunc),b.remove(e,
this.fixIE?"mousedown":"click",this.mouseClickFunc),b.remove(e,"keydown",this._keyHandler),c.hide(e),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(f=c.get(this.id))&&c.removeClass(f.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this)},add:function(a){var b,a=this.parent(a);this.isRendered&&(b=c.get("menu_"+this.id))&&this._add(c.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){c.remove(a.id);
this.destroy();return this.parent(a)},destroy:function(){var a=c.get("menu_"+this.id);b.remove(a,"mouseover",this.mouseOverFunc);b.remove(a,"click",this.mouseClickFunc);this.element&&this.element.remove();c.remove(a)},renderNode:function(){var d=this,b=d.settings,e,j,i;i=c.create("div",{id:"menu_"+d.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000"});j=c.add(i,"div",{id:"menu_"+d.id+"_co","class":d.classPrefix+(b["class"]?" "+b["class"]:"")});d.element=new a("menu_"+d.id,
{blocker:1,container:b.container});b.menu_line&&c.add(j,"span",{"class":d.classPrefix+"Line"});b=c.add(j,"table",{id:"menu_"+d.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});e=c.add(b,"tbody");g(d.items,function(a){d._add(e,a)});d.rendered=!0;return i},_keyHandler:function(a){a.keyCode==27&&this.hideMenu()},_add:function(a,b){var e,g=b.settings,i,k,l=this.classPrefix;g.separator?(i=c.add(a,"tr",{id:b.id,"class":l+"ItemSeparator"}),c.add(i,"td",{"class":l+"ItemSeparator"}),(e=i.previousSibling)&&
c.addClass(e,"mceLast")):(e=i=c.add(a,"tr",{id:b.id,"class":l+"Item "+l+"ItemEnabled"}),e=k=c.add(e,"td"),e=c.add(e,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),c.addClass(k,g["class"]),c.add(e,"span",{"class":"mceIcon"+(g.icon?" mce_"+g.icon:"")}),e=c.add(e,g.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(e,"style",b.settings.style),a.childNodes.length==1&&c.addClass(i,"mceFirst"),(e=i.previousSibling)&&
c.hasClass(e,l+"ItemSeparator")&&c.addClass(i,"mceFirst"),b.collapse&&c.addClass(i,l+"ItemSub"),(e=i.previousSibling)&&c.removeClass(e,"mceLast"),c.addClass(i,"mceLast"))}})})();
(function(){var e=tinymce.DOM;tinymce.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(c,e){this.parent(c,e);this.classPrefix="mceButton"},renderHTML:function(){var c=this.classPrefix,g=this.settings,b,a;a=e.encode(g.label||"");b='<a id="'+this.id+'" href="javascript:;" class="'+c+" "+c+"Enabled "+g["class"]+(a?" "+c+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+e.encode(g.title)+'">';b+=g.image?'<img class="mceIcon" src="'+g.image+'" />'+a+"</a>":'<span class="mceIcon '+
g["class"]+'"></span>'+(a?'<span class="'+c+'Label">'+a+"</span>":"")+"</a>";return b},postRender:function(){var c=this,e=c.settings;tinymce.dom.Event.add(c.id,"click",function(b){if(!c.isDisabled())return e.onclick.call(e.scope,b)})}})})();
(function(){var e=tinymce.DOM,c=tinymce.dom.Event,g=tinymce.each,b=tinymce.util.Dispatcher;tinymce.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,d){this.parent(a,d);this.items=[];this.onChange=new b(this);this.onPostRender=new b(this);this.onAdd=new b(this);this.onRenderMenu=new tinymce.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var d,b;if(a!=this.selectedValue)if(d=e.get(this.id+"_text"),this.selectedValue=a,g(this.items,function(c){if(c.value==a)return e.setHTML(d,
e.encode(c.title)),b=1,!1}),b)e.removeClass(d,"mceTitle");else{e.setHTML(d,e.encode(this.settings.title));e.addClass(d,"mceTitle");d=0;return}d=0},add:function(a,d,b){b=b||{};b=tinymce.extend(b,{title:a,value:d});this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,d=this.classPrefix,a='<table id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+d+" "+d+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>';
a+="<td>"+e.createHTML("a",{id:this.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},e.encode(this.settings.title))+"</td>";a+="<td>"+e.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";a+="</tr></tbody></table>";return a},showMenu:function(){var a=this,d,b=e.get(this.id),f;if(!(a.isDisabled()||a.items.length==0)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();
if(!a.isMenuRendered)a.renderMenu(),a.isMenuRendered=!0;e.getPos(this.settings.menu_container);d=e.getPos(b);f=a.menu;f.settings.offset_x=d.x;f.settings.offset_y=d.y;f.settings.keyboard_focus=a._focused;a.oldID&&f.items[a.oldID].setSelected(0);g(a.items,function(d){if(d.value===a.selectedValue)f.items[d.id].setSelected(1),a.oldID=d.id});f.showMenu(0,b.clientHeight);c.add(e.doc,"mousedown",a.hideMenu,a);e.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(!a||!(a.type=="mousedown"&&
(a.target.id==this.id+"_text"||a.target.id==this.id+"_open")))if(!a||!e.getParent(a.target,function(a){return e.hasClass(a,"mceMenu")}))e.removeClass(this.id,this.classPrefix+"Selected"),c.remove(e.doc,"mousedown",this.hideMenu,this),this.menu&&this.menu.hideMenu()},renderMenu:function(){var a=this,d;d=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});d.onHideMenu.add(a.hideMenu,a);d.add({title:a.settings.title,
"class":"mceMenuItemTitle"}).setDisabled(1);g(a.items,function(b){b.id=e.uniqueId();b.onclick=function(){a.settings.onselect(b.value)!==!1&&a.select(b.value)};d.add(b)});a.onRenderMenu.dispatch(a,d);a.menu=d},postRender:function(){var a=this,d=a.classPrefix;c.add(a.id,"click",a.showMenu,a);c.add(a.id+"_text","focus",function(){a._focused=1});c.add(a.id+"_text","blur",function(){a._focused=0});if(tinymce.isIE6||!e.boxModel)c.add(a.id,"mouseover",function(){e.hasClass(a.id,d+"Disabled")||e.addClass(a.id,
d+"Hover")}),c.add(a.id,"mouseout",function(){e.hasClass(a.id,d+"Disabled")||e.removeClass(a.id,d+"Hover")});a.onPostRender.dispatch(a,e.get(a.id))},destroy:function(){this.parent();c.clear(this.id+"_text")}})})();
(function(){var e=tinymce.DOM,c=tinymce.dom.Event,g=tinymce.each;tinymce.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(b,a){this.parent(b,a);this.classPrefix="mceNativeListBox"},setDisabled:function(b){e.get(this.id).disabled=b},isDisabled:function(){return e.get(this.id).disabled},select:function(b){var a=e.get(this.id),d=a.options,b=""+(b||"");a.selectedIndex=0;g(d,function(d,c){if(d.value==b)return a.selectedIndex=c,!1})},add:function(b,a,d){d=d||{};d.value=a;this.isRendered()&&
e.add(e.get(this.id),"option",d,b);b={title:b,value:a,attribs:d};this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return e.get(this.id).options.length-1},renderHTML:function(){var b;b=e.createHTML("option",{value:""},"-- "+this.settings.title+" --");g(this.items,function(a){b+=e.createHTML("option",{value:a.value},a.title)});return b=e.createHTML("select",{id:this.id,"class":"mceNativeListBox"},b)},postRender:function(){function b(d){d=d.target.options[d.target.selectedIndex].value;
a.onChange.dispatch(a,d);if(a.settings.onselect)a.settings.onselect(d)}var a=this;a.rendered=!0;c.add(a.id,"change",b);c.add(a.id,"keydown",function(d){var e;c.remove(a.id,"change",void 0);e=c.add(a.id,"blur",function(){c.add(a.id,"change",b);c.remove(a.id,"blur",e)});if(d.keyCode==13||d.keyCode==32)return b(d),c.cancel(d)});a.onPostRender.dispatch(a,e.get(a.id))}})})();
(function(){var e=tinymce.DOM,c=tinymce.dom.Event;tinymce.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,b){this.parent(c,b);this.onRenderMenu=new tinymce.util.Dispatcher(this);b.menu_container=b.menu_container||e.doc.body},showMenu:function(){var g,b=e.get(this.id),a;if(!this.isDisabled()){if(!this.isMenuRendered)this.renderMenu(),this.isMenuRendered=!0;if(this.isMenuVisible)return this.hideMenu();e.getPos(this.settings.menu_container);g=e.getPos(b);a=this.menu;a.settings.offset_x=
g.x;a.settings.offset_y=g.y;a.settings.vp_offset_x=g.x;a.settings.vp_offset_y=g.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,b.clientHeight);c.add(e.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var c;c=this.settings.control_manager.createDropMenu(this.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:this.settings.icons});c.onHideMenu.add(this.hideMenu,this);this.onRenderMenu.dispatch(this,c);this.menu=c},hideMenu:function(g){var b=
this;if(!g||!(g.type=="mousedown"&&e.getParent(g.target,function(a){return a.id===b.id||a.id===b.id+"_open"}))){if(!g||!e.getParent(g.target,function(a){return e.hasClass(a,"mceMenu")}))b.setState("Selected",0),c.remove(e.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu();b.isMenuVisible=0}},postRender:function(){var e=this,b=e.settings;c.add(e.id,"click",function(){if(!e.isDisabled()){if(b.onclick)b.onclick(e.value);e.showMenu()}})}})})();
(function(){var e=tinymce.DOM,c=tinymce.dom.Event;tinymce.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(c,b){this.parent(c,b);this.classPrefix="mceSplitButton"},renderHTML:function(){var c,b=this.settings,a;c="<tbody><tr>";a=b.image?e.createHTML("img ",{src:b.image,"class":"mceAction "+b["class"]}):e.createHTML("span",{"class":"mceAction "+b["class"]},"");c+="<td>"+e.createHTML("a",{id:this.id+"_action",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",
onmousedown:"return false;",title:b.title},a)+"</td>";a=e.createHTML("span",{"class":"mceOpen "+b["class"]});c+="<td>"+e.createHTML("a",{id:this.id+"_open",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},a)+"</td>";c+="</tr></tbody>";return e.createHTML("table",{id:this.id,"class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:b.title},c)},postRender:function(){var g=
this,b=g.settings;b.onclick&&c.add(g.id+"_action","click",function(){if(!g.isDisabled())b.onclick(g.value)});c.add(g.id+"_open","click",g.showMenu,g);c.add(g.id+"_open","focus",function(){g._focused=1});c.add(g.id+"_open","blur",function(){g._focused=0});if(tinymce.isIE6||!e.boxModel)c.add(g.id,"mouseover",function(){e.hasClass(g.id,"mceSplitButtonDisabled")||e.addClass(g.id,"mceSplitButtonHover")}),c.add(g.id,"mouseout",function(){e.hasClass(g.id,"mceSplitButtonDisabled")||e.removeClass(g.id,"mceSplitButtonHover")})},
destroy:function(){this.parent();c.clear(this.id+"_action");c.clear(this.id+"_open")}})})();
(function(){var e=tinymce.DOM,c=tinymce.dom.Event,g=tinymce.is,b=tinymce.each;tinymce.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,d){this.parent(a,d);this.settings=d=tinymce.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,
default_color:"#888888"},this.settings);this.value=d.default_color},showMenu:function(){var a=this,d,b;if(!a.isDisabled()){if(!a.isMenuRendered)a.renderMenu(),a.isMenuRendered=!0;if(a.isMenuVisible)return a.hideMenu();d=e.get(a.id);e.show(a.id+"_menu");e.addClass(d,"mceSplitButtonSelected");b=e.getPos(d);e.setStyles(a.id+"_menu",{left:b.x,top:b.y+d.clientHeight,zIndex:2E5});d=0;c.add(e.doc,"mousedown",a.hideMenu,a);if(a._focused)a._keyHandler=c.add(a.id+"_menu","keydown",function(d){d.keyCode==27&&
a.hideMenu()}),e.select("a",a.id+"_menu")[0].focus();a.isMenuVisible=1}},hideMenu:function(a){var d=this;if(!a||!(a.type=="mousedown"&&e.getParent(a.target,function(a){return a.id===d.id+"_open"}))){if(!a||!e.getParent(a.target,function(a){return e.hasClass(a,"mceSplitButtonMenu")}))e.removeClass(d.id,"mceSplitButtonSelected"),c.remove(e.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),e.hide(d.id+"_menu");d.isMenuVisible=0}},renderMenu:function(){var a=this,d,h=0,f=a.settings,
j,i,k,l;l=e.add(f.menu_container,"div",{id:a.id+"_menu","class":f.menu_class+" "+f["class"],style:"position:absolute;left:0;top:-1000px;"});d=e.add(l,"div",{"class":f["class"]+" mceSplitButtonMenu"});e.add(d,"span",{"class":"mceMenuLine"});j=e.add(d,"table",{"class":"mceColorSplitMenu"});i=e.add(j,"tbody");h=0;b(g(f.colors,"array")?f.colors:f.colors.split(","),function(a){a=a.replace(/^#/,"");h--||(k=e.add(i,"tr"),h=f.grid_width-1);j=e.add(k,"td");j=e.add(j,"a",{href:"javascript:;",style:{backgroundColor:"#"+
a},mce_color:"#"+a})});f.more_colors_func&&(j=e.add(i,"tr"),j=e.add(j,"td",{colspan:f.grid_width,"class":"mceMoreColors"}),j=e.add(j,"a",{id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},f.more_colors_title),c.add(j,"click",function(a){f.more_colors_func.call(f.more_colors_scope||this);return c.cancel(a)}));e.addClass(d,"mceColorSplitMenu");c.add(a.id+"_menu","click",function(d){var b,d=d.target;d.nodeName=="A"&&(b=d.getAttribute("mce_color"))&&a.setColor(b);return c.cancel(d)});
return l},setColor:function(a){e.setStyle(this.id+"_preview","backgroundColor",a);this.value=a;this.hideMenu();this.settings.onselect(a)},postRender:function(){var a=this.id;this.parent();e.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"})},destroy:function(){this.parent();c.clear(this.id+"_menu");c.clear(this.id+"_more");e.remove(this.id+"_menu")}})})();
tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e="",c,g,b=tinymce.DOM,a=this.settings,d,h,f,j;j=this.controls;for(d=0;d<j.length;d++){g=j[d];h=j[d-1];f=j[d+1];d===0&&(c="mceToolbarStart",g.Button?c+=" mceToolbarStartButton":g.SplitButton?c+=" mceToolbarStartSplitButton":g.ListBox&&(c+=" mceToolbarStartListBox"),e+=b.createHTML("td",{"class":c},b.createHTML("span",null,"<\!-- IE --\>")));if(h&&g.ListBox&&(h.Button||h.SplitButton))e+=b.createHTML("td",{"class":"mceToolbarEnd"},
b.createHTML("span",null,"<\!-- IE --\>"));e+=b.stdMode?'<td style="position: relative">'+g.renderHTML()+"</td>":"<td>"+g.renderHTML()+"</td>";if(f&&g.ListBox&&(f.Button||f.SplitButton))e+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<\!-- IE --\>"))}c="mceToolbarEnd";g.Button?c+=" mceToolbarEndButton":g.SplitButton?c+=" mceToolbarEndSplitButton":g.ListBox&&(c+=" mceToolbarEndListBox");e+=b.createHTML("td",{"class":c},b.createHTML("span",null,"<\!-- IE --\>"));return b.createHTML("table",
{id:this.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||""},"<tbody><tr>"+e+"</tr></tbody>")}});
(function(){tinymce.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new tinymce.util.Dispatcher(this),get:function(e){return this.lookup[e]},requireLangPack:function(e){var c;if(tinymce.EditorManager.settings)e=this.urls[e]+"/langs/"+tinymce.EditorManager.settings.language+".js",(c=tinymce.EditorManager.settings)&&(!tinymce.dom.Event.domLoaded&&!c.strict_mode?tinymce.ScriptLoader.load(e):tinymce.ScriptLoader.add(e))},add:function(e,c){this.items.push(c);this.lookup[e]=c;this.onAdd.dispatch(this,
e,c);return c},load:function(e,c,g,b){this.urls[e]||(c.indexOf("/")!=0&&c.indexOf("://")==-1&&(c=tinymce.baseURL+"/"+c),this.urls[e]=c.substring(0,c.lastIndexOf("/")),tinymce.ScriptLoader.add(c,g,b))}});tinymce.PluginManager=new tinymce.AddOnManager;tinymce.ThemeManager=new tinymce.AddOnManager})();
(function(){var e=tinymce.each,c=tinymce.extend,g=tinymce.DOM,b=tinymce.dom.Event,a=tinymce.ThemeManager,d=tinymce.PluginManager,h=tinymce.explode;tinymce.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var a=this,d=window.location;tinymce.documentBaseURL=d.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(tinymce.documentBaseURL)||(tinymce.documentBaseURL+="/");tinymce.baseURL=(new tinymce.util.URI(tinymce.documentBaseURL)).toAbsolute(tinymce.baseURL);
tinymce.EditorManager.baseURI=new tinymce.util.URI(tinymce.baseURL);if(tinymce.EditorManager.baseURI.host!=d.hostname&&d.hostname)document.domain=tinymce.relaxedDomain=d.hostname.replace(/.*\.(.+\..+)$/,"$1");a.onBeforeUnload=new tinymce.util.Dispatcher(a);b.add(window,"beforeunload",function(d){a.onBeforeUnload.dispatch(a,d)})},init:function(f){function j(a,d,b){var c=a[d];if(c)return tinymce.is(c,"string")&&(b=(b=c.replace(/\.\w+$/,""))?tinymce.resolve(b):0,c=tinymce.resolve(c)),c.apply(b||this,
Array.prototype.slice.call(arguments,2))}var i=this,k,l=tinymce.ScriptLoader,m,f=c({theme:"simple",language:"en",strict_loading_mode:document.contentType=="application/xhtml+xml"},f);i.settings=f;!b.domLoaded&&!f.strict_loading_mode&&(f.language&&l.add(tinymce.baseURL+"/langs/"+f.language+".js"),f.theme&&f.theme.charAt(0)!="-"&&!a.urls[f.theme]&&a.load(f.theme,"themes/"+f.theme+"/editor_template"+tinymce.suffix+".js"),f.plugins&&(k=h(f.plugins),tinymce.inArray(k,"compat2x")!=-1&&d.load("compat2x",
"plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),e(k,function(a){a&&a.charAt(0)!="-"&&!d.urls[a]&&(tinymce.isWebKit||a!="safari")&&d.load(a,"plugins/"+a+"/editor_plugin"+tinymce.suffix+".js")})),l.loadQueue());b.add(document,"init",function(){var a,d;j(f,"onpageload");if(f.browsers&&(a=!1,e(h(f.browsers),function(d){switch(d){case "ie":case "msie":tinymce.isIE&&(a=!0);break;case "gecko":tinymce.isGecko&&(a=!0);break;case "safari":case "webkit":tinymce.isWebKit&&(a=!0);break;case "opera":tinymce.isOpera&&
(a=!0)}}),!a))return;switch(f.mode){case "exact":a=f.elements||"";a.length>0&&e(h(a),function(a){g.get(a)?(new tinymce.Editor(a,f)).render(1):e(document.forms,function(d){e(d.elements,function(d){d.name===a&&(a="mce_editor_0",g.setAttrib(d,"id",a),(new tinymce.Editor(a,f)).render(1))})})});break;case "textareas":case "specific_textareas":e(g.select("textarea"),function(a){if(!f.editor_deselector||!(f.editor_deselector.constructor===RegExp?f.editor_deselector.test(a.className):g.hasClass(a,f.editor_deselector)))if(!f.editor_selector||
(f.editor_selector.constructor===RegExp?f.editor_selector.test(a.className):g.hasClass(a,f.editor_selector))){m=g.get(a.name);if(!a.id&&!m)a.id=a.name;if(!a.id||i.get(a.id))a.id=g.uniqueId();(new tinymce.Editor(a.id,f)).render(1)}})}f.oninit&&(a=d=0,e(i.editors,function(b){d++;b.initialized?a++:b.onInit.add(function(){a++;a==d&&j(f,"oninit")});a==d&&j(f,"oninit")}))})},get:function(a){return this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){this.editors[a.id]=a;this._setActive(a);
return a},remove:function(a){var d=this;if(!d.editors[a.id])return null;delete d.editors[a.id];d.activeEditor==a&&e(d.editors,function(a){d._setActive(a);return!1});a.destroy();return a},execCommand:function(a,d,b){var c=this.get(b),e;switch(a){case "mceFocus":return c.focus(),!0;case "mceAddEditor":case "mceAddControl":return this.get(b)||(new tinymce.Editor(b,this.settings)).render(),!0;case "mceAddFrameControl":e=b.window;e.tinyMCE=tinyMCE;e.tinymce=tinymce;tinymce.DOM.doc=e.document;tinymce.DOM.win=
e;c=new tinymce.Editor(b.element_id,b);c.render();if(tinymce.isIE){var h=function(){var f;c.destroy();e.detachEvent("onunload",h);f=e.tinyMCE=e.tinymce=null,e=f};e.attachEvent("onunload",h)}b.page_window=null;return!0;case "mceRemoveEditor":case "mceRemoveControl":return c.remove(),!0;case "mceToggleEditor":if(!c)return this.execCommand("mceAddControl",0,b),!0;c.isHidden()?c.show():c.hide();return!0}return this.activeEditor?this.activeEditor.execCommand(a,d,b):!1},execInstanceCommand:function(a,d,
b,c){return(a=this.get(a))?a.execCommand(d,b,c):!1},triggerSave:function(){e(this.editors,function(a){a.save()})},addI18n:function(a,d){var b=this.i18n;tinymce.is(a,"string")?e(d,function(d,c){b[a+"."+c]=d}):e(a,function(a,d){e(a,function(a,c){e(a,function(a,e){c==="common"?b[d+"."+e]=a:b[d+"."+c+"."+e]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}});tinymce.EditorManager.preInit()})();var tinyMCE=window.tinyMCE=tinymce.EditorManager;
(function(){var e=tinymce.DOM,c=tinymce.dom.Event,g=tinymce.extend,b=tinymce.util.Dispatcher,a=tinymce.each,d=tinymce.isGecko,h=tinymce.isIE,f=tinymce.isWebKit,j=tinymce.is,i=tinymce.ThemeManager,k=tinymce.PluginManager,l=tinymce.EditorManager,m=tinymce.inArray,n=tinymce.explode;tinymce.create("tinymce.Editor",{Editor:function(d,c){var e=this;e.id=e.editorId=d;e.execCommands={};e.queryStateCommands={};e.queryValueCommands={};e.plugins={};a("onPreInit,onBeforeRenderUI,onPostRender,onInit,onRemove,onActivate,onDeactivate,onClick,onEvent,onMouseUp,onMouseDown,onDblClick,onKeyDown,onKeyUp,onKeyPress,onContextMenu,onSubmit,onReset,onPaste,onPreProcess,onPostProcess,onBeforeSetContent,onBeforeGetContent,onSetContent,onGetContent,onLoadContent,onSaveContent,onNodeChange,onChange,onBeforeExecCommand,onExecCommand,onUndo,onRedo,onVisualAid,onSetProgressState,onBlur".split(","),
function(a){e[a]=new b(e)});e.settings=c=g({id:d,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,
doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:!0,convert_fonts_to_spans:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote,-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value|_value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",
hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px"},c);e.documentBaseURI=new tinymce.util.URI(c.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI});e.baseURI=l.baseURI;e.execCallback("setup",e)},render:function(d){function b(){g.language&&m.add(tinymce.baseURL+"/langs/"+g.language+".js");g.theme.charAt(0)!="-"&&!i.urls[g.theme]&&i.load(g.theme,"themes/"+g.theme+"/editor_template"+tinymce.suffix+".js");a(n(g.plugins),function(a){a&&
a.charAt(0)!="-"&&!k.urls[a]&&(f||a!="safari")&&k.load(a,"plugins/"+a+"/editor_plugin"+tinymce.suffix+".js")});m.loadQueue(function(){if(g.ask){var a=function(){h.windowManager.confirm(h.getLang("edit_confirm"),function(d){d?h.init():c.remove(h.id,"focus",a)})};c.add(h.id,"focus",a)}else h.removed||h.init()})}var h=this,g=h.settings,j=h.id,m=tinymce.ScriptLoader;if(c.domLoaded){if(!d)g.strict_loading_mode=1,tinyMCE.settings=g;if(h.getElement()){if(g.strict_loading_mode)m.settings.strict_mode=g.strict_loading_mode,
tinymce.DOM.settings.strict=1;!/TEXTAREA|INPUT/i.test(h.getElement().nodeName)&&g.hidden_input&&e.getParent(j,"form")&&e.insertAfter(e.create("input",{type:"hidden",name:j}),j);h.windowManager=new tinymce.WindowManager(h);g.encoding=="xml"&&h.onGetContent.add(function(a,d){if(d.get)d.content=e.encode(d.content)});g.add_form_submit_trigger&&h.onSubmit.addToTop(function(){if(h.initialized)h.save(),h.isNotDirty=1});if(g.add_unload_trigger)h._beforeUnload=tinyMCE.onBeforeUnload.add(function(){h.initialized&&
!h.destroyed&&!h.isHidden()&&h.save({format:"raw",no_events:!0})});tinymce.addUnload(h.destroy,h);g.submit_patch&&h.onBeforeRenderUI.add(function(){var a=h.getElement().form;if(a&&!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length)h.formElement=a,a._mceOldSubmit=a.submit,a.submit=function(){l.triggerSave();h.isNotDirty=1;return this._mceOldSubmit(this)};a=null}});g.plugins.indexOf("compat2x")!=-1?(k.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),m.loadQueue(b)):b()}}else c.add(document,
"init",function(){h.render()})},init:function(){var b,f=this,g=f.settings,j,m=f.getElement(),q,t,v;l.add(f);g.theme=g.theme.replace(/-/,"");q=i.get(g.theme);f.theme=new q;f.theme.init&&g.init_theme&&f.theme.init(f,i.urls[g.theme]||tinymce.documentBaseURL.replace(/\/$/,""));a(n(g.plugins.replace(/\-/g,"")),function(a){var d=k.get(a),b=k.urls[a]||tinymce.documentBaseURL.replace(/\/$/,"");d&&(d=new d(f,b),f.plugins[a]=d,d.init&&d.init(f,b))});g.popup_css=g.popup_css?f.documentBaseURI.toAbsolute(g.popup_css):
f.baseURI.toAbsolute("themes/"+g.theme+"/skins/"+g.skin+"/dialog.css");g.popup_css_add&&(g.popup_css+=","+f.documentBaseURI.toAbsolute(g.popup_css_add));f.controlManager=new tinymce.ControlManager(f);f.undoManager=new tinymce.UndoManager(f);f.undoManager.onAdd.add(function(a,d){if(!d.initial)return f.onChange.dispatch(f,d,a)});f.undoManager.onUndo.add(function(a,d){return f.onUndo.dispatch(f,d,a)});f.undoManager.onRedo.add(function(a,d){return f.onRedo.dispatch(f,d,a)});g.custom_undo_redo&&f.onExecCommand.add(function(a,
d,b,c,e){d!="Undo"&&d!="Redo"&&d!="mceRepaint"&&(!e||!e.skip_undo)&&f.undoManager.add()});f.onExecCommand.add(function(a,d){/^(FontName|FontSize)$/.test(d)||f.nodeChanged()});d&&(v=function(a,d){(!d||!d.initial)&&f.execCommand("mceRepaint")},f.onUndo.add(v),f.onRedo.add(v),f.onSetContent.add(v));f.onBeforeRenderUI.dispatch(f,f.controlManager);if(g.render_ui)j=g.width||m.style.width||m.offsetWidth,b=g.height||m.style.height||m.offsetHeight,f.orgDisplay=m.style.display,v=/^[0-9\.]+(|px)$/i,v.test(""+
j)&&(j=Math.max(parseInt(j)+(q.deltaWidth||0),100)),v.test(""+b)&&(b=Math.max(parseInt(b)+(q.deltaHeight||0),100)),q=f.theme.renderUI({targetNode:m,width:j,height:b,deltaWidth:g.delta_width,deltaHeight:g.delta_height}),f.editorContainer=q.editorContainer;e.setStyles(q.sizeContainer||q.editorContainer,{width:j,height:b});b=(q.iframeHeight||b)+((b+"").indexOf("%")==-1?q.deltaHeight||0:"");b<100&&(b=100);f.iframeHTML=g.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+f.documentBaseURI.getURI()+
'"></base>';f.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';tinymce.relaxedDomain&&(f.iframeHTML+='<script type="text/javascript">document.domain = "'+tinymce.relaxedDomain+'";<\/script>');j=g.body_id||"tinymce";j.indexOf("=")!=-1&&(j=f.getParam("body_id","","hash"),j=j[f.id]||j);g=g.body_class||"";g.indexOf("=")!=-1&&(g=f.getParam("body_class","","hash"),g=g[f.id]||"");f.iframeHTML+='</head><body id="'+j+'" class="mceContentBody '+g+'"></body></html>';tinymce.relaxedDomain&&
(h?t='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()':tinymce.isOpera&&(t='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()'));b=e.add(q.iframeContainer,"iframe",{id:f.id+"_ifr",src:t||'javascript:""',frameBorder:"0",style:{width:"100%",height:b}});f.contentAreaContainer=q.iframeContainer;
e.get(q.editorContainer).style.display=f.orgDisplay;e.get(f.id).style.display="none";tinymce.isOldWebKit?(c.add(b,"load",f.setupIframe,f),b.src=tinymce.baseURL+"/plugins/safari/blank.htm"):((!h||!tinymce.relaxedDomain)&&f.setupIframe(),m=b=q=null)},setupIframe:function(){var b=this,f=b.settings;e.get(b.id);var g=b.getDoc(),i;if(!h||!tinymce.relaxedDomain)g.open(),g.write(b.iframeHTML),g.close();if(!h)try{g.designMode="On"}catch(j){}if(h)i=b.getBody(),e.hide(i),i.contentEditable=!0,e.show(i);b.dom=
new tinymce.DOM.DOMUtils(b.getDoc(),{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:1,fix_ie_paragraphs:1});b.serializer=new tinymce.dom.Serializer({entity_encoding:f.entity_encoding,entities:f.entities,valid_elements:f.verify_html===!1?"*[*]":f.valid_elements,extended_valid_elements:f.extended_valid_elements,valid_child_elements:f.valid_child_elements,invalid_elements:f.invalid_elements,fix_table_elements:f.fix_table_elements,
fix_list_elements:f.fix_list_elements,fix_content_duplication:f.fix_content_duplication,convert_fonts_to_spans:f.convert_fonts_to_spans,font_size_classes:f.font_size_classes,font_size_style_values:f.font_size_style_values,apply_source_formatting:f.apply_source_formatting,remove_linebreaks:f.remove_linebreaks,dom:b.dom});b.selection=new tinymce.dom.Selection(b.dom,b.getWin(),b.serializer);b.forceBlocks=new tinymce.ForceBlocks(b,{forced_root_block:f.forced_root_block});b.editorCommands=new tinymce.EditorCommands(b);
b.serializer.onPreProcess.add(function(a,d){return b.onPreProcess.dispatch(b,d,a)});b.serializer.onPostProcess.add(function(a,d){return b.onPostProcess.dispatch(b,d,a)});b.onPreInit.dispatch(b);if(!f.gecko_spellcheck)b.getBody().spellcheck=0;b._addEvents();b.controlManager.onPostRender.dispatch(b,b.controlManager);b.onPostRender.dispatch(b);if(f.directionality)b.getBody().dir=f.directionality;if(f.nowrap)b.getBody().style.whiteSpace="nowrap";f.auto_resize&&b.onNodeChange.add(b.resizeToContent,b);
if(f.custom_elements){var k=function(b,d){a(n(f.custom_elements),function(a){var b;a.indexOf("~")===0?(a=a.substring(1),b="span"):b="div";d.content=d.content.replace(RegExp("<("+a+")([^>]*)>","g"),"<"+b+' mce_name="$1"$2>');d.content=d.content.replace(RegExp("</("+a+")>","g"),"</"+b+">")})};b.onBeforeSetContent.add(k);b.onPostProcess.add(function(a,b){b.set&&k(a,b)})}f.handle_node_change_callback&&b.onNodeChange.add(function(a,d,c){b.execCallback("handle_node_change_callback",b.id,c,-1,-1,!0,b.selection.isCollapsed())});
f.save_callback&&b.onSaveContent.add(function(a,d){var c=b.execCallback("save_callback",b.id,d.content,b.getBody());if(c)d.content=c});f.onchange_callback&&b.onChange.add(function(a,d){b.execCallback("onchange_callback",b,d)});f.convert_newlines_to_brs&&b.onBeforeSetContent.add(function(a,b){if(b.initial)b.content=b.content.replace(/\r?\n/g,"<br />")});f.fix_nesting&&h&&b.onBeforeSetContent.add(function(a,d){d.content=b._fixNesting(d.content)});f.preformatted&&b.onPostProcess.add(function(a,b){b.content=
b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");if(b.set)b.content='<pre class="mceItemHidden">'+b.content+"</pre>"});if(f.verify_css_classes)b.serializer.attribValueFilter=function(d,c){var e,f;if(d=="class"){if(!b.classesRE&&(f=b.dom.getClasses(),f.length>0))e="",a(f,function(a){e+=(e?"|":"")+a["class"]}),b.classesRE=RegExp("("+e+")","gi");return!b.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(c)||b.classesRE.test(c)?c:""}return c};f.convert_fonts_to_spans&&
b._convertFonts();f.inline_styles&&b._convertInlineElements();f.cleanup_callback&&(b.onBeforeSetContent.add(function(a,d){d.content=b.execCallback("cleanup_callback","insert_to_editor",d.content,d)}),b.onPreProcess.add(function(a,d){d.set&&b.execCallback("cleanup_callback","insert_to_editor_dom",d.node,d);d.get&&b.execCallback("cleanup_callback","get_from_editor_dom",d.node,d)}),b.onPostProcess.add(function(a,d){if(d.set)d.content=b.execCallback("cleanup_callback","insert_to_editor",d.content,d);
if(d.get)d.content=b.execCallback("cleanup_callback","get_from_editor",d.content,d)}));f.save_callback&&b.onGetContent.add(function(a,d){if(d.save)d.content=b.execCallback("save_callback",b.id,d.content,b.getBody())});f.handle_event_callback&&b.onEvent.add(function(a,d,e){b.execCallback("handle_event_callback",d,a,e)===!1&&c.cancel(d)});b.onSetContent.add(function(){b.addVisual(b.getBody())});f.padd_empty_editor&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,
"")});if(d)try{g.designMode="Off",g.designMode="On"}catch(m){}setTimeout(function(){if(!b.removed)b.load({initial:!0,format:f.cleanup_on_startup?"html":"raw"}),b.startContent=b.getContent({format:"raw"}),b.undoManager.add({initial:!0}),b.initialized=!0,b.onInit.dispatch(b),b.execCallback("setupcontent_callback",b.id,b.getBody(),b.getDoc()),b.execCallback("init_instance_callback",b),b.focus(!0),b.nodeChanged({initial:1}),f.content_css&&tinymce.each(n(f.content_css),function(a){b.dom.loadCSS(b.documentBaseURI.toAbsolute(a))}),
f.auto_focus&&setTimeout(function(){var a=l.get(f.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);a.getWin().focus()},100)},1)},focus:function(a){var b;a||this.getWin().focus();if(l.activeEditor!=this)(b=l.activeEditor)!=null&&b.onDeactivate.dispatch(b,this),this.onActivate.dispatch(this,b);l._setActive(this)},execCallback:function(a){var b=this.settings[a],d;if(b){if(this.callbackLookup&&(d=this.callbackLookup[a]))b=d.func,d=d.scope;if(j(b,"string"))d=(d=b.replace(/\.\w+$/,
""))?tinymce.resolve(d):0,b=tinymce.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:d};return b.apply(d||this,Array.prototype.slice.call(arguments,1))}},translate:function(a){var b=this.settings.language,d=l.i18n;return!a?"":d[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,c){return d[b+"."+c]||"{#"+c+"}"})},getLang:function(a,b){return l.i18n[this.settings.language+"."+a]||(j(b)?b:"{#"+a+"}")},getParam:function(b,d,c){var e=tinymce.trim,b=j(this.settings[b])?
this.settings[b]:d,f;return c==="hash"?(f={},j(b,"string")?a(b.indexOf("=")>0?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):b.split(","),function(a){a=a.split("=");a.length>1?f[e(a[0])]=e(a[1]):f[e(a[0])]=e(a)}):f=b,f):b},nodeChanged:function(a){var b=this.selection,d=b.getNode()||this.getBody();this.initialized&&this.onNodeChange.dispatch(this,a?a.controlManager||this.controlManager:this.controlManager,h&&d.ownerDocument!=this.getDoc()?this.getBody():d,b.isCollapsed(),a)},addButton:function(a,b){this.buttons=
this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,d){this.execCommands[a]={func:b,scope:d||this}},addQueryStateHandler:function(a,b,d){this.queryStateCommands[a]={func:b,scope:d||this}},addQueryValueHandler:function(a,b,d){this.queryValueCommands[a]={func:b,scope:d||this}},addShortcut:function(b,d,c,e){var f=this,h;if(!f.settings.custom_shortcuts)return!1;f.shortcuts=f.shortcuts||{};j(c,"string")&&(h=c,c=function(){f.execCommand(h,!1,null)});j(c,"object")&&(h=c,c=function(){f.execCommand(h[0],
h[1],h[2])});a(n(b),function(b){var h={func:c,scope:e||this,desc:d,alt:!1,ctrl:!1,shift:!1};a(n(b,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":h[a]=!0;break;default:h.charCode=a.charCodeAt(0),h.keyCode=a.toUpperCase().charCodeAt(0)}});f.shortcuts[(h.ctrl?"ctrl":"")+","+(h.alt?"alt":"")+","+(h.shift?"shift":"")+","+h.keyCode]=h});return!0},execCommand:function(b,d,c,e){var f=this,h=0,g;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(b)&&(!e||!e.skip_focus)&&
f.focus();g={};f.onBeforeExecCommand.dispatch(f,b,d,c,g);if(g.terminate)return!1;if(f.execCallback("execcommand_callback",f.id,f.selection.getNode(),b,d,c))return f.onExecCommand.dispatch(f,b,d,c,e),!0;if(g=f.execCommands[b])if(g=g.func.call(g.scope,d,c),g!==!0)return f.onExecCommand.dispatch(f,b,d,c,e),g;a(f.plugins,function(a){if(a.execCommand&&a.execCommand(b,d,c))return f.onExecCommand.dispatch(f,b,d,c,e),h=1,!1});if(h)return!0;if(f.theme.execCommand&&f.theme.execCommand(b,d,c))return f.onExecCommand.dispatch(f,
b,d,c,e),!0;if(f.editorCommands.execCommand(b,d,c))return f.onExecCommand.dispatch(f,b,d,c,e),!0;f.getDoc().execCommand(b,d,c);f.onExecCommand.dispatch(f,b,d,c,e)},queryCommandState:function(a){var b;if(!this._isHidden()){if(b=this.queryStateCommands[a])if(b=b.func.call(b.scope),b!==!0)return b;b=this.editorCommands.queryCommandState(a);if(b!==-1)return b;try{return this.getDoc().queryCommandState(a)}catch(d){}}},queryCommandValue:function(a){var b;if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=
b.func.call(b.scope),b!==!0)return b;b=this.editorCommands.queryCommandValue(a);if(j(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(d){}}},show:function(){e.show(this.getContainer());e.hide(this.id);this.load()},hide:function(){var a=this.getDoc();h&&a&&a.execCommand("SelectAll");this.save();e.hide(this.getContainer());e.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!e.isHidden(this.id)},setProgressState:function(a,b,d){this.onSetProgressState.dispatch(this,
a,b,d);return a},resizeToContent:function(){e.setStyle(this.id+"_ifr","height",this.getBody().scrollHeight)},load:function(a){var b=this.getElement(),d,a=a||{};a.load=!0;d=this.setContent(j(b.value)?b.value:b.innerHTML,a);a.element=b;a.no_events||this.onLoadContent.dispatch(this,a);a.element=null;return d},save:function(b){var d=this,c=d.getElement(),f,h;if(d.initialized)return b=b||{},b.save=!0,b.element=c,f=b.content=d.getContent(b),b.no_events||d.onSaveContent.dispatch(d,b),f=b.content,/TEXTAREA|INPUT/i.test(c.nodeName)?
c.value=f:(c.innerHTML=f,(h=e.getParent(d.id,"form"))&&a(h.elements,function(a){if(a.name==d.id)return a.value=f,!1})),b.element=c=null,f},setContent:function(a,b){b=b||{};b.format=b.format||"html";b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);if(!tinymce.isIE&&(a.length===0||/^\s+$/.test(a)))b.content=this.dom.setHTML(this.getBody(),'<br mce_bogus="1" />',1),b.format="raw";b.content=this.dom.setHTML(this.getBody(),tinymce.trim(b.content));if(b.format!="raw"&&this.settings.cleanup)b.getInner=
!0,b.content=this.dom.setHTML(this.getBody(),this.serializer.serialize(this.getBody(),b));b.no_events||this.onSetContent.dispatch(this,b);return b.content},getContent:function(a){a=a||{};a.format=a.format||"html";a.get=!0;a.no_events||this.onBeforeGetContent.dispatch(this,a);a.format!="raw"&&this.settings.cleanup?(a.getInner=!0,a=this.serializer.serialize(this.getBody(),a)):a=this.getBody().innerHTML;a=a.replace(/^\s*|\s*$/g,"");a={content:a};this.onGetContent.dispatch(this,a);return a.content},isDirty:function(){return tinymce.trim(this.startContent)!=
tinymce.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){if(!this.container)this.container=e.get(this.editorContainer||this.id+"_parent");return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return e.get(this.settings.content_element||this.id)},getWin:function(){var a;if(!this.contentWindow&&(a=e.get(this.id+"_ifr")))this.contentWindow=a.contentWindow;return this.contentWindow},getDoc:function(){var a;
if(!this.contentDocument&&(a=this.getWin()))this.contentDocument=a.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,d){var c=this.settings;if(c.urlconverter_callback)return this.execCallback("urlconverter_callback",a,d,!0,b);if(!c.convert_urls||d&&d.nodeName=="LINK"||a.indexOf("file:")===0)return a;return c.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,c.remove_script_host)},addVisual:function(b){var d=
this,c=d.settings,b=b||d.getBody();if(!j(d.hasVisual))d.hasVisual=c.visual;a(d.dom.select("table,a",b),function(a){var b;switch(a.nodeName){case "TABLE":b=d.dom.getAttrib(a,"border");if(!b||b=="0")d.hasVisual?d.dom.addClass(a,c.visual_table_class):d.dom.removeClass(a,c.visual_table_class);break;case "A":(b=d.dom.getAttrib(a,"name"))&&(d.hasVisual?d.dom.addClass(a,"mceItemAnchor"):d.dom.removeClass(a,"mceItemAnchor"))}});d.onVisualAid.dispatch(d,b,d.hasVisual)},remove:function(){var a=this.getContainer();
this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];l.remove(this);e.remove(a)},destroy:function(a){if(!this.destroyed){a||(tinymce.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(c.clear(this.getWin()),c.clear(this.getDoc())),c.clear(this.getBody()),
c.clear(this.formElement));if(this.formElement)this.formElement.submit=this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null;this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null;if(this.selection)this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null;this.destroyed=1}},_addEvents:function(){function b(a,d){f.removed||f.onEvent.dispatch(f,a,d)!==!1&&f[i[a.fakeType||
a.type]].dispatch(f,a,d)}var f=this,h,g=f.settings,i={mouseup:"onMouseUp",mousedown:"onMouseDown",blur:"onBlur",focusout:"onBlur",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(i,function(a,d){switch(d){case "contextmenu":tinymce.isOpera?c.add(f.getDoc(),"mousedown",function(a){if(a.ctrlKey)a.fakeType="contextmenu",b(a)}):c.add(f.getDoc(),d,b);break;case "paste":c.add(f.getBody(),
d,function(a){var d;a.clipboardData?d=a.clipboardData.getData("text/plain"):tinymce.isIE&&(d=f.getWin().clipboardData.getData("Text"));b(a,{text:d,html:void 0})});break;case "submit":case "reset":c.add(f.getElement().form||e.getParent(f.id,"form"),d,b);break;default:c.add(g.content_editable?f.getBody():f.getDoc(),d,b)}});c.add(g.content_editable?f.getBody():d?f.getDoc():f.getWin(),"focus",function(){f.focus(!0)});tinymce.isGecko&&c.add(f.getDoc(),"DOMNodeInserted",function(a){var b,a=a.target;if(a.nodeType===
1&&a.nodeName==="IMG"&&(b=a.getAttribute("mce_src")))a.src=f.documentBaseURI.toAbsolute(b)});d&&(h=function(){var a=this.getDoc(),b=this.settings;if(d){if(this._isHidden())try{if(!b.content_editable)a.designMode="On"}catch(c){}try{a.execCommand("styleWithCSS",0,!1)}catch(f){this._isHidden()||a.execCommand("useCSS",0,!0)}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(h){}}},f.onBeforeExecCommand.add(h),
f.onMouseDown.add(h));f.onMouseUp.add(f.nodeChanged);f.onClick.add(f.nodeChanged);f.onKeyUp.add(function(a,b){(b.keyCode>=33&&b.keyCode<=36||b.keyCode>=37&&b.keyCode<=40||b.keyCode==13||b.keyCode==45||b.keyCode==46||b.keyCode==8||b.ctrlKey)&&f.nodeChanged()});f.onReset.add(function(){f.setContent(f.startContent,{format:"raw"})});if(f.getParam("tab_focus")){h=function(a,b){if(b.keyCode===9)return c.cancel(b)};var j=function(b,d){function f(d){i=e.getParent(b.id,"form");j=i.elements;if(i)if(a(j,function(a,
d){if(a.id==b.id)return h=d,!1}),d>0)for(g=h+1;g<j.length;g++){if(j[g].type!="hidden")return j[g]}else for(g=h-1;g>=0;g--)if(j[g].type!="hidden")return j[g];return null}var h,g,i,j,k;if(d.keyCode===9&&(k=n(b.getParam("tab_focus")),k.length==1&&(k[1]=k[0],k[0]=":prev"),j=d.shiftKey?k[0]==":prev"?f(-1):e.get(k[0]):k[1]==":next"?f(1):e.get(k[1])))return(b=l.get(j.id||j.name))?b.focus():window.setTimeout(function(){window.focus();j.focus()},10),c.cancel(d)};f.onKeyUp.add(h);d?(f.onKeyPress.add(j),f.onKeyDown.add(h)):
f.onKeyDown.add(j)}if(g.custom_shortcuts){g.custom_undo_redo_keyboard_shortcuts&&(f.addShortcut("ctrl+z",f.getLang("undo_desc"),"Undo"),f.addShortcut("ctrl+y",f.getLang("redo_desc"),"Redo"));d&&(f.addShortcut("ctrl+b",f.getLang("bold_desc"),"Bold"),f.addShortcut("ctrl+i",f.getLang("italic_desc"),"Italic"),f.addShortcut("ctrl+u",f.getLang("underline_desc"),"Underline"));for(h=1;h<=6;h++)f.addShortcut("ctrl+"+h,"",["FormatBlock",!1,"<h"+h+">"]);f.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]);f.addShortcut("ctrl+8",
"",["FormatBlock",!1,"<div>"]);f.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]);var k=function(b){var d=null;if(!b.altKey&&!b.ctrlKey&&!b.metaKey)return d;a(f.shortcuts,function(a){if(!(a.ctrl!=b.ctrlKey&&(!tinymce.isMac||a.ctrl==b.metaKey)))if(a.alt==b.altKey&&a.shift==b.shiftKey&&(b.keyCode==a.keyCode||b.charCode&&b.charCode==a.charCode))return d=a,!1});return d};f.onKeyUp.add(function(a,b){if(k(b))return c.cancel(b)});f.onKeyPress.add(function(a,b){if(k(b))return c.cancel(b)});f.onKeyDown.add(function(a,
b){var d=k(b);if(d)return d.func.call(d.scope),c.cancel(b)})}tinymce.isIE&&(c.add(f.getDoc(),"controlselect",function(a){var b=f.resizeInfo,a=a.target;if(a.nodeName==="IMG")b&&c.remove(b.node,b.ev,b.cb),f.dom.hasClass(a,"mceItemNoResize")?(ev="resizestart",b=c.add(a,"resizestart",c.cancel,c)):(ev="resizeend",b=c.add(a,ev,function(a){var b,a=a.target;if(b=f.dom.getStyle(a,"width"))f.dom.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),f.dom.setStyle(a,"width","");if(b=f.dom.getStyle(a,"height"))f.dom.setAttrib(a,
"height",b.replace(/[^0-9%]+/g,"")),f.dom.setStyle(a,"height","")})),b=f.resizeInfo={node:a,ev:ev,cb:b}}),f.onKeyDown.add(function(a,b){switch(b.keyCode){case 8:if(f.selection.getRng().item)return f.selection.getRng().item(0).removeNode(),c.cancel(b)}}));tinymce.isOpera&&f.onClick.add(function(a,b){c.prevent(b)});if(g.custom_undo_redo){var m=function(){f.undoManager.typing=0;f.undoManager.add()};tinymce.isIE?c.add(f.getWin(),"blur",function(){var a;f.selection&&(a=f.selection.getNode(),!f.removed&&
a.ownerDocument&&a.ownerDocument!=f.getDoc()&&m())}):c.add(f.getDoc(),"blur",function(){f.selection&&!f.removed&&m()});f.onMouseDown.add(m);f.onKeyUp.add(function(a,b){if(b.keyCode>=33&&b.keyCode<=36||b.keyCode>=37&&b.keyCode<=40||b.keyCode==13||b.keyCode==45||b.ctrlKey)f.undoManager.typing=0,f.undoManager.add()});f.onKeyDown.add(function(a,b){if(b.keyCode>=33&&b.keyCode<=36||b.keyCode>=37&&b.keyCode<=40||b.keyCode==13||b.keyCode==45){if(f.undoManager.typing)f.undoManager.add(),f.undoManager.typing=
0}else if(!f.undoManager.typing)f.undoManager.add(),f.undoManager.typing=1})}},_convertInlineElements:function(){function b(i,j){c.inline_styles&&(j.get?a(d.dom.select("table,u,strike",j.node),function(a){switch(a.nodeName){case "TABLE":if(e=f.getAttrib(a,"height"))f.setStyle(a,"height",e),f.setAttrib(a,"height","");break;case "U":case "STRIKE":a.style.textDecoration=a.nodeName=="U"?"underline":"line-through",f.setAttrib(a,"mce_style",""),f.setAttrib(a,"mce_name","span")}}):j.set&&a(d.dom.select("table,span",
j.node).reverse(),function(a){if(a.nodeName=="TABLE")(e=f.getStyle(a,"height"))&&f.setAttrib(a,"height",e.replace(/[^0-9%]+/g,""));else if(g=a.style.textDecoration=="underline"?"u":a.style.textDecoration=="line-through"?"strike":"")a.style.textDecoration="",f.setAttrib(a,"mce_style",""),h=f.create(g,{style:f.getAttrib(a,"style")}),f.replace(h,a,1)}))}var d=this,c=d.settings,f=d.dom,e,h,g;d.onPreProcess.add(b);c.cleanup_on_startup||d.onSetContent.add(function(a,c){c.initial&&b(d,{node:d.getBody(),
set:1})})},_convertFonts:function(){var a=this,b=a.settings,d=a.dom,c,f,e,h;if(b.inline_styles){c=[8,10,12,14,18,24,36];f="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");if(e=b.font_size_style_values)e=n(e);if(h=b.font_size_classes)h=n(h);a.onSetContent.add(function(g){var g=g.getBody(),i,j,l,k,n;if(!tinymce.isWebKit&&b.inline_styles){j=a.dom.select("span",g);for(l=j.length-1;l>=0;l--){g=j[l];i=d.create("font",{color:d.toHex(d.getStyle(g,"color")),face:d.getStyle(g,"fontFamily"),
style:d.getAttrib(g,"style"),"class":d.getAttrib(g,"class")});k=i.style;if(k.color||k.fontFamily)k.color=k.fontFamily="",d.setAttrib(i,"mce_style","");if(e)k=m(e,d.getStyle(g,"fontSize")),k!=-1&&d.setAttrib(i,"size",""+(k+1||1));else if(h&&(k=m(h,d.getAttrib(g,"class")),n=d.getStyle(g,"fontSize"),k==-1&&n.indexOf("pt")>0&&(k=m(c,parseInt(n))),k==-1&&(k=m(f,n)),k!=-1))d.setAttrib(i,"size",""+(k+1||1)),i.style.fontSize="";if(i.color||i.face||i.size)i.style.fontFamily="",d.setAttrib(i,"mce_style",""),
d.replace(i,g,1)}}});a.onPreProcess.add(function(c,f){var g,i,j,k;if(b.inline_styles&&f.get){j=a.dom.select("font",f.node);for(k=j.length-1;k>=0;k--)g=j[k],i=d.create("span",{style:d.getAttrib(g,"style"),"class":d.getAttrib(g,"class")}),d.setStyles(i,{fontFamily:d.getAttrib(g,"face"),color:d.getAttrib(g,"color"),backgroundColor:g.style.backgroundColor}),g.size&&(e?d.setStyle(i,"fontSize",e[parseInt(g.size)-1]):d.setAttrib(i,"class",h[parseInt(g.size)-1])),d.setAttrib(i,"mce_style",""),d.replace(i,
g,1)}})}},_isHidden:function(){var a;if(!d)return 0;a=this.selection.getSel();return!a||!a.rangeCount||a.rangeCount==0},_fixNesting:function(a){var b=[],d,a=a.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(a,c,f){if(c==="/"){if(!b.length)return"";if(f!==b[b.length-1].tag){for(d=b.length-1;d>=0;d--)if(b[d].tag===f){b[d].close=1;break}return""}else b.pop(),b.length&&b[b.length-1].close&&(a=a+"</"+b[b.length-1].tag+">",b.pop())}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(f))return a;if(/\/>$/.test(a))return a;
b.push({tag:f})}return a});for(d=b.length-1;d>=0;d--)a+="</"+b[d].tag+">";return a}})})();
(function(){var e=tinymce.each,c=tinymce.isIE,g=tinymce.isGecko,b=tinymce.isOpera,a=tinymce.isWebKit;tinymce.create("tinymce.EditorCommands",{EditorCommands:function(a){this.editor=a},execCommand:function(a,b,c){var e=this.editor;switch(a){case "Cut":case "Copy":case "Paste":try{e.getDoc().execCommand(a,b,c)}catch(i){g?e.windowManager.confirm(e.getLang("clipboard_msg"),function(a){a&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","mceExternal")}):e.windowManager.alert(e.getLang("clipboard_no_support"))}return!0;
case "mceResetDesignMode":case "mceBeginUndoLevel":return!0;case "unlink":return this.UnLink(),!0;case "JustifyLeft":case "JustifyCenter":case "JustifyRight":case "JustifyFull":return this.mceJustify(a,a.substring(7).toLowerCase()),!0;case "mceEndUndoLevel":case "mceAddUndoLevel":return e.undoManager.add(),!0;default:if(a=this[a])return a.call(this,b,c),!0}return!1},Indent:function(){var a=this.editor,b=a.dom,f=a.selection,g,i;g=a.settings.indentation;i=/[a-z%]+$/i.exec(g);g=parseInt(g);a.settings.inline_styles&&
!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList()?e(this._getSelectedBlocks(),function(a){b.setStyle(a,"paddingLeft",parseInt(a.style.paddingLeft||0)+g+i)}):(a.getDoc().execCommand("Indent",!1,null),c&&b.getParent(f.getNode(),function(a){if(a.nodeName=="BLOCKQUOTE")a.dir=a.style.cssText=""}))},Outdent:function(){var a=this.editor,b=a.dom,c,g,i;g=a.settings.indentation;i=/[a-z%]+$/i.exec(g);g=parseInt(g);a.settings.inline_styles&&!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList()?
e(this._getSelectedBlocks(),function(a){c=Math.max(0,parseInt(a.style.paddingLeft||0)-g);b.setStyle(a,"paddingLeft",c?c+i:"")}):a.getDoc().execCommand("Outdent",!1,null)},mceSetAttribute:function(a,b){var c=this.editor,e=c.dom,g;(g=e.getParent(c.selection.getNode(),e.isBlock))&&e.setAttrib(g,b.name,b.value)},mceSetContent:function(a,b){this.editor.setContent(b)},mceToggleVisualAid:function(){var a=this.editor;a.hasVisual=!a.hasVisual;a.addVisual()},mceReplaceContent:function(a,b){var c=this.editor.selection;
c.setContent(b.replace(/\{\$selection\}/g,c.getContent({format:"text"})))},mceInsertLink:function(a,b){function c(a){e(b,function(b,d){g.dom.setAttrib(a,d,b)})}var g=this.editor,i=g.dom.getParent(g.selection.getNode(),"A");tinymce.is(b,"string")&&(b={href:b});i?b.href?c(i):g.dom.remove(i,1):(g.execCommand("CreateLink",!1,"javascript:mctmp(0);"),e(g.dom.select("a"),function(a){a.href=="javascript:mctmp(0);"&&c(a)}))},UnLink:function(){var a=this.editor,b=a.selection;b.isCollapsed()&&b.select(b.getNode());
a.getDoc().execCommand("unlink",!1,null);b.collapse(0)},FontName:function(a,b){var c=this.editor,e=c.selection;b?c.getDoc().execCommand("FontName",!1,b):(e.isCollapsed()&&e.select(e.getNode()),this.RemoveFormat())},FontSize:function(a,b){var c=this.editor,g=c.settings,i=tinymce.explode(g.font_size_style_values),k=tinymce.explode(g.font_size_classes);c.getDoc().execCommand("FontSize",!1,b);g.inline_styles&&e(c.dom.select("font"),function(a){a.size===b&&(k&&k.length>0?c.dom.setAttrib(a,"class",k[parseInt(b)-
1]):c.dom.setStyle(a,"fontSize",i[parseInt(b)-1]))})},queryCommandValue:function(a){var b=this["queryValue"+a];return b?b.call(this,a):!1},queryCommandState:function(a){var b;switch(a){case "JustifyLeft":case "JustifyCenter":case "JustifyRight":case "JustifyFull":return this.queryStateJustify(a,a.substring(7).toLowerCase());default:if(b=this["queryState"+a])return b.call(this,a)}return-1},_queryState:function(a){try{return this.editor.getDoc().queryCommandState(a)}catch(b){}},_queryVal:function(a){try{return this.editor.getDoc().queryCommandValue(a)}catch(b){}},
queryValueFontSize:function(){var d=this.editor,c=0;if(b||a){if(d=d.dom.getParent(d.selection.getNode(),"FONT"))c=d.size;return c}return this._queryVal("FontSize")},queryValueFontName:function(){var a=this.editor,b=0;if(a=a.dom.getParent(a.selection.getNode(),"FONT"))b=a.face;b||(b=this._queryVal("FontName"));return b},mceJustify:function(a,b){var c=this.editor,g=c.selection,i=g.getNode(),k=i.nodeName,l,m=c.dom,n;c.settings.inline_styles&&this.queryStateJustify(a,b)&&(n=1);l=m.getParent(i,c.dom.isBlock);
if(k=="IMG"){if(b!="full"){if(n)b=="center"&&m.setStyle(i.parentNode,"textAlign",""),m.setStyle(i,"float","");else if(b=="center"){/^(TD|TH)$/.test(l.nodeName)&&(l=0);if(!l||l.childNodes.length>1)c=m.create("p"),c.appendChild(i.cloneNode(!1)),l?m.insertAfter(c,l):m.insertAfter(c,i),m.remove(i),i=c.firstChild,l=c;m.setStyle(l,"textAlign",b);m.setStyle(i,"float","")}else m.setStyle(i,"float",b),m.setStyle(i.parentNode,"textAlign","");this.mceRepaint()}}else c.settings.inline_styles&&c.settings.forced_root_block?
(n&&(b=""),e(this._getSelectedBlocks(m.getParent(g.getStart(),m.isBlock),m.getParent(g.getEnd(),m.isBlock)),function(a){m.setAttrib(a,"align","");m.setStyle(a,"textAlign",b=="full"?"justify":b)})):(n||c.getDoc().execCommand(a,!1,null),c.settings.inline_styles&&(n?m.getParent(c.selection.getNode(),function(a){a.style&&a.style.textAlign&&m.setStyle(a,"textAlign","")}):e(m.select("*"),function(a){var b=a.align;b&&(b=="full"&&(b="justify"),m.setStyle(a,"textAlign",b),m.setAttrib(a,"align",""))})))},mceSetCSSClass:function(a,
b){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:b})},getSelectedElement:function(){var a=this.editor,b=a.dom,f=a.selection,e=f.getRng(),g,k,l,m,n;if(f.isCollapsed()||e.item)return f.getNode();f=a.settings.merge_styles_invalid_parents;tinymce.is(f,"string")&&(f=RegExp(f,"i"));if(c){if(g=e.duplicate(),g.collapse(!0),a=g.parentElement(),k=e.duplicate(),k.collapse(!1),l=k.parentElement(),a!=l&&(g.move("character",1),a=g.parentElement()),a==l&&(g=e.duplicate(),g.moveToElementText(a),
g.compareEndPoints("StartToStart",e)==0&&g.compareEndPoints("EndToEnd",e)==0))return f&&f.test(a.nodeName)?null:a}else{var p=function(a){return b.getParent(a,function(a){return a.nodeType==1})},a=e.startContainer;l=e.endContainer;m=e.startOffset;n=e.endOffset;if(!e.collapsed&&a==l&&m-n<2&&a.hasChildNodes())return g=a.childNodes[m],f&&f.test(g.nodeName)?null:g;if(a.nodeType!=3||l.nodeType!=3)return null;m==0&&(g=p(a))&&g.firstChild!=a&&(g=null);if(m==a.nodeValue.length&&(e=a.nextSibling)&&e.nodeType==
1)g=a.nextSibling;if(n==0)(e=l.previousSibling)&&e.nodeType==1&&(k=e);n==l.nodeValue.length&&(k=p(l))&&k.lastChild!=l&&(k=null);if(g==k)return f&&g&&f.test(g.nodeName)?null:g}return null},InsertHorizontalRule:function(){g||c?this.editor.selection.setContent("<hr />"):this.editor.getDoc().execCommand("InsertHorizontalRule",!1,"")},RemoveFormat:function(){var b=this.editor,c=b.selection;a?c.setContent(c.getContent({format:"raw"}).replace(/(<(span|b|i|strong|em|strike) [^>]+>|<(span|b|i|strong|em|strike)>|<\/(span|b|i|strong|em|strike)>|)/g,
""),{format:"raw"}):b.getDoc().execCommand("RemoveFormat",!1,null);this.mceSetStyleInfo(0,{command:"removeformat"});b.addVisual()},mceSetStyleInfo:function(b,c){function f(a){if(a.nodeType==1)switch(c.command){case "setattrib":return k.setAttrib(a,c.name,c.value);case "setstyle":return k.setStyle(a,c.name,c.value);case "removeformat":return k.setAttrib(a,"class","")}}var g=this.editor,i=g.getDoc(),k=g.dom,l,m=g.selection,n=c.wrapper||"span";l=m.getBookmark();var p;p=g.settings.merge_styles_invalid_parents;
tinymce.is(p,"string")&&(p=RegExp(p,"i"));(g=this.getSelectedElement())?f(g,1):(i.execCommand("FontName",!1,"__"),e(a?k.select("span"):k.select("font"),function(a){var b;if(k.getAttrib(a,"face")=="__"||a.style.fontFamily==="__")b=k.create(n,{mce_new:"1"}),f(b),e(a.childNodes,function(a){b.appendChild(a.cloneNode(!0))}),k.replace(b,a)}));e(k.select(n).reverse(),function(a){var b=a.parentNode;k.getAttrib(a,"mce_new")||(b=k.getParent(a,function(a){return a.nodeType==1&&k.getAttrib(a,"mce_new")}))&&k.remove(a,
1)});e(k.select(n).reverse(),function(a){var b=a.parentNode;if(b&&k.getAttrib(a,"mce_new")){if(b.nodeName==n.toUpperCase()&&b.childNodes.length==1)return k.remove(b,1);if(a.nodeType==1&&(!p||!p.test(b.nodeName))&&b.childNodes.length==1)f(b),k.setAttrib(a,"class","")}});e(k.select(n).reverse(),function(a){if(k.getAttrib(a,"mce_new")||k.getAttribs(a).length<=1&&a.className===""){if(!k.getAttrib(a,"class")&&!k.getAttrib(a,"style"))return k.remove(a,1);k.setAttrib(a,"mce_new","")}});m.moveToBookmark(l)},
queryStateJustify:function(a,b){var c=this.editor,e=c.selection.getNode(),g=c.dom;if(e&&e.nodeName=="IMG")return g.getStyle(e,"float")==b?1:e.parentNode.style.textAlign==b;e=g.getParent(c.selection.getStart(),function(a){return a.nodeType==1&&a.style.textAlign});b=="full"&&(b="justify");return c.settings.inline_styles?e&&e.style.textAlign==b:this._queryState(a)},HiliteColor:function(a,c){function e(a){if(g)try{j.execCommand("styleWithCSS",0,a)}catch(b){j.execCommand("useCSS",0,!a)}}var j=this.editor.getDoc();
g||b?(e(!0),j.execCommand("hilitecolor",!1,c),e(!1)):j.execCommand("BackColor",!1,c)},Undo:function(){var a=this.editor;a.settings.custom_undo_redo?(a.undoManager.undo(),a.nodeChanged()):a.getDoc().execCommand("Undo",!1,null)},Redo:function(){var a=this.editor;a.settings.custom_undo_redo?(a.undoManager.redo(),a.nodeChanged()):a.getDoc().execCommand("Redo",!1,null)},FormatBlock:function(a,b){var c=this.editor,b=c.settings.forced_root_block?b||"<p>":b;/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE|DL|DD|DT)$/.test(c.selection.getNode().nodeName)&&
this.mceRemoveNode();b.indexOf("<")==-1&&(b="<"+b+">");tinymce.isGecko&&(b=b.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1"));c.getDoc().execCommand("FormatBlock",!1,b)},mceCleanup:function(){var a=this.editor,b=a.selection,c=b.getBookmark();a.setContent(a.getContent());b.moveToBookmark(c)},mceRemoveNode:function(a,b){var c=this.editor,e=c.selection,g,k=b||e.getNode();k!=c.getBody()&&(g=e.getBookmark(),c.dom.remove(k,1),e.moveToBookmark(g),c.nodeChanged())},mceSelectNodeDepth:function(a,b){var c=
this.editor,e=c.selection,g=0;c.dom.getParent(e.getNode(),function(a){if(a.nodeType==1&&g++==b)return e.select(a),c.nodeChanged(),!1},c.getBody())},mceSelectNode:function(a,b){this.editor.selection.select(b)},mceInsertContent:function(a,b){this.editor.selection.setContent(b)},mceInsertRawHTML:function(a,b){var c=this.editor;c.selection.setContent("tiny_mce_marker");c.setContent(c.getContent().replace(/tiny_mce_marker/g,b))},mceRepaint:function(){var a,b,c=this.editor;if(tinymce.isGecko)try{a=c.selection,
b=a.getBookmark(!0),a.getSel()&&a.getSel().selectAllChildren(c.getBody()),a.collapse(!0),a.moveToBookmark(b)}catch(e){}},queryStateUnderline:function(){var a=this.editor.selection.getNode();return a&&a.nodeName=="A"?!1:this._queryState("Underline")},queryStateOutdent:function(){var a=this.editor,b;if(a.settings.inline_styles){if((b=a.dom.getParent(a.selection.getStart(),a.dom.isBlock))&&parseInt(b.style.paddingLeft)>0)return!0;if((b=a.dom.getParent(a.selection.getEnd(),a.dom.isBlock))&&parseInt(b.style.paddingLeft)>
0)return!0}else return!!a.dom.getParent(a.selection.getNode(),"BLOCKQUOTE");return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return!!this.editor.dom.getParent(this.editor.selection.getStart(),function(a){return a.nodeName===
"BLOCKQUOTE"})},mceBlockQuote:function(){function a(b){return g.getParent(b,function(a){return a.nodeName==="BLOCKQUOTE"})}var b=this.editor,f=b.selection,g=b.dom,i,k,l,m,n,p,o;i=g.getParent(f.getStart(),g.isBlock);k=g.getParent(f.getEnd(),g.isBlock);if(n=a(i)){if(i!=k||i.childNodes.length>1||i.childNodes.length==1&&i.firstChild.nodeName!="BR")m=f.getBookmark();if(a(k))for(p=n.cloneNode(!1);l=k.nextSibling;)p.appendChild(l.parentNode.removeChild(l));p&&g.insertAfter(p,n);o=this._getSelectedBlocks(i,
k);for(k=o.length-1;k>=0;k--)g.insertAfter(o[k],n);/^\s*$/.test(n.innerHTML)&&g.remove(n,1);p&&/^\s*$/.test(p.innerHTML)&&g.remove(p,1);m?this.editor.selection.moveToBookmark(m):c?(f.select(i),f.collapse(0),g.getParent(f.getStart(),g.isBlock)!=i&&(b=f.getRng(),b.move("character",-1),b.select())):(b=b.getDoc().createRange(),b.setStart(i,0),b.setEnd(i,0),f.setRng(b))}else if(c&&!i&&!k)this.editor.getDoc().execCommand("Indent"),l=a(f.getNode()),l.style.margin=l.dir="";else if(i&&k){if(i!=k||i.childNodes.length>
1||i.childNodes.length==1&&i.firstChild.nodeName!="BR")m=f.getBookmark();e(this._getSelectedBlocks(a(f.getStart()),a(f.getEnd())),function(a){if(a.nodeName=="BLOCKQUOTE"&&!n)n=a;else if(n||(n=g.create("blockquote"),a.parentNode.insertBefore(n,a)),a.nodeName=="BLOCKQUOTE"&&n){for(l=a.firstChild;l;)n.appendChild(l.cloneNode(!0)),l=l.nextSibling;g.remove(a)}else n.appendChild(g.remove(a))});m?f.moveToBookmark(m):c?(f.select(i),f.collapse(1)):(b=b.getDoc().createRange(),b.setStart(i,0),b.setEnd(i,0),
f.setRng(b))}},_getSelectedBlocks:function(a,b){var c=this.editor,e=c.dom,g=c.selection,k,l=[],c=e.getParent(a||g.getStart(),e.isBlock),g=e.getParent(b||g.getEnd(),e.isBlock);c&&l.push(c);if(c&&g&&c!=g)for(k=c;(k=k.nextSibling)&&k!=g;)e.isBlock(k)&&l.push(k);g&&c!=g&&l.push(g);return l}})})();
tinymce.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(e){var c=tinymce.util.Dispatcher;this.editor=e;this.data=[];this.onAdd=new c(this);this.onUndo=new c(this);this.onRedo=new c(this)},add:function(e){var c,g=this.editor,b,a=g.settings,e=e||{};e.content=e.content||g.getContent({format:"raw",no_events:1});e.content=e.content.replace(/^\s*|\s*$/g,"");c=this.data[this.index>0&&(this.index==0||this.index==this.data.length)?this.index-1:this.index];if(!e.initial&&c&&e.content==
c.content)return null;if(a.custom_undo_redo_levels&&this.data.length>a.custom_undo_redo_levels){for(c=0;c<this.data.length-1;c++)this.data[c]=this.data[c+1];this.data.length--;this.index=this.data.length}if(a.custom_undo_redo_restore_selection&&!e.initial)e.bookmark=b=e.bookmark||g.selection.getBookmark();this.index<this.data.length&&this.index++;if(this.data.length===0&&!e.initial)return null;this.data.length=this.index+1;this.data[this.index++]=e;if(e.initial)this.index=0;if(this.data.length==2&&
this.data[0].initial)this.data[0].bookmark=b;this.onAdd.dispatch(this,e);g.isNotDirty=0;return e},undo:function(){var e=this.editor,c=c;if(this.typing)this.add(),this.typing=0;if(this.index>0){if(this.index==this.data.length&&this.index>1){c=this.index;this.typing=0;if(!this.add())this.index=c;--this.index}c=this.data[--this.index];e.setContent(c.content,{format:"raw"});e.selection.moveToBookmark(c.bookmark);this.onUndo.dispatch(this,c)}return c},redo:function(){var e=this.editor,c=null;this.index<
this.data.length-1&&(c=this.data[++this.index],e.setContent(c.content,{format:"raw"}),e.selection.moveToBookmark(c.bookmark),this.onRedo.dispatch(this,c));return c},clear:function(){this.data=[];this.typing=this.index=0;this.add({initial:!0})},hasUndo:function(){return this.index!=0||this.typing},hasRedo:function(){return this.index<this.data.length-1}});
(function(){var e,c,g,b,a;e=tinymce.dom.Event;c=tinymce.isIE;g=tinymce.isGecko;b=tinymce.isOpera;a=tinymce.each;tinymce.create("tinymce.ForceBlocks",{ForceBlocks:function(a){function e(a,d){if(b)d.content=d.content.replace(f.reOpera,"</"+i+">");d.content=d.content.replace(f.rePadd,"<"+i+"$1$2$3$4$5$6>\u00a0</"+i+">");!c&&!b&&d.set?(d.content=d.content.replace(f.reNbsp2BR1,"<"+i+"$1$2><br /></"+i+">"),d.content=d.content.replace(f.reNbsp2BR2,"<"+i+"$1$2><br /></"+i+">")):(d.content=d.content.replace(f.reBR2Nbsp,
"<"+i+"$1$2>\u00a0</"+i+">"),d.content=d.content.replace(f.reTrailBr,"</"+i+">"))}var f=this,g=a.settings,i;f.editor=a;f.dom=a.dom;i=(g.forced_root_block||"p").toLowerCase();g.element=i.toUpperCase();a.onPreInit.add(f.setup,f);f.reOpera=RegExp("(\\u00a0|&#160;|&nbsp;)</"+i+">","gi");f.rePadd=RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,i),"gi");f.reNbsp2BR1=RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,
i),"gi");f.reNbsp2BR2=RegExp("<p( )([^>]+)>(&nbsp;|&#160;)<\\/p>|<p>(&nbsp;|&#160;)<\\/p>".replace(/p/g,i),"gi");f.reBR2Nbsp=RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,i),"gi");f.reTrailBr=RegExp("\\s*<br \\/>\\s*<\\/p>".replace(/p/g,i),"gi");a.onBeforeSetContent.add(e);a.onPostProcess.add(e);g.forced_root_block&&(a.onInit.add(f.forceRoots,f),a.onSetContent.add(f.forceRoots,f),a.onBeforeGetContent.add(f.forceRoots,f))},setup:function(){function b(d,c){var e=
f.dom.create(c);a(d.attributes,function(a){a.specified&&a.nodeValue&&e.setAttribute(a.nodeName.toLowerCase(),a.nodeValue)});a(d.childNodes,function(a){e.appendChild(a.cloneNode(!0))});d.parentNode.replaceChild(e,d);return e}var h=this,f=h.editor,j=f.settings;j.forced_root_block&&(f.onKeyUp.add(h.forceRoots,h),f.onPreProcess.add(h.forceRoots,h));j.force_br_newlines?c&&f.onKeyPress.add(function(a,b){var d,c=a.selection;if(b.keyCode==13&&c.getNode().nodeName!="LI")return c.setContent('<br id="__" /> ',
{format:"raw"}),d=a.dom.get("__"),d.removeAttribute("id"),c.select(d),c.collapse(),e.cancel(b)}):(!c&&j.force_p_newlines&&(f.onKeyPress.add(function(a,b){b.keyCode==13&&!b.shiftKey&&(h.insertPara(b)||e.cancel(b))}),g&&f.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&h.backspaceDelete(b,b.keyCode==8)})),c&&j.element!="P"&&(f.onKeyPress.add(function(a){h.lastElm=a.selection.getNode().nodeName}),f.onKeyUp.add(function(a,c){var e;e=a.selection;var f=e.getNode();if(a.getBody().childNodes.length===
1&&f.nodeName=="P")f=b(f,j.element),e.select(f),e.collapse(),a.nodeChanged();else if(c.keyCode==13&&!c.shiftKey&&h.lastElm!="P"&&(e=a.dom.getParent(f,"P")))b(e,j.element),a.nodeChanged()})))},find:function(a,b,c){for(var e=this.editor.getDoc().createTreeWalker(a,4,null,!1),g=-1;a=e.nextNode();){g++;if(b==0&&a==c)return g;if(b==1&&g==c)return a}return-1},forceRoots:function(a,b){var a=this.editor,e=a.getBody(),g=a.getDoc(),i=a.selection,k=i.getSel(),i=i.getRng(),l=-2,m,n,p,o,u,s=e.childNodes,r;if(b&&
b.keyCode==13)return!0;for(r=s.length-1;r>=0;r--)if(u=s[r],u.nodeType==3||!this.dom.isBlock(u)&&u.nodeType!=8)if(o)o.hasChildNodes()?o.insertBefore(u,o.firstChild):o.appendChild(u);else{if(u.nodeType!=3||/[^\s]/g.test(u.nodeValue)){if(l==-2&&i)c?(o=g.body.createTextRange(),o.moveToElementText(e),o.collapse(1),l=o.move("character",-16777215)*-1,o=i.duplicate(),o.collapse(1),m=o.move("character",-16777215)*-1,o=i.duplicate(),o.collapse(0),o=o.move("character",-16777215)*-1-m,l=m-l,m=o):(n=i.startOffset,
p=i.endOffset,l=this.find(e,0,i.startContainer),m=this.find(e,0,i.endContainer));o=a.dom.create(a.settings.forced_root_block);o.appendChild(u.cloneNode(1));u.parentNode.replaceChild(o,u)}}else o=null;if(l!=-2)if(c)try{i=k.createRange(),i.moveToElementText(e),i.collapse(1),i.moveStart("character",l),i.moveEnd("character",m),i.select()}catch(q){}else o=g.getElementsByTagName(a.settings.element)[0],i=g.createRange(),l!=-1?i.setStart(this.find(e,1,l),n):i.setStart(o,0),m!=-1?i.setEnd(this.find(e,1,m),
p):i.setEnd(o,0),k&&(k.removeAllRanges(),k.addRange(i))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){var d;function a(b){b=b.innerHTML;b=b.replace(/<(img|hr|table)/gi,"-");b=b.replace(/<[^>]+>/g,"");return b.replace(/[ \t\r\n]+/g,"")==""}var c=this.editor,e=c.dom,j=c.getDoc(),i=c.settings,k=c.selection.getSel(),l=k.getRangeAt(0),l=j.body,m,n,p,o,u,s,r,q,t,v,w=e.getViewPort(c.getWin());m=j.createRange();m.setStart(k.anchorNode,k.anchorOffset);m.collapse(!0);
n=j.createRange();n.setStart(k.focusNode,k.focusOffset);n.collapse(!0);o=(p=m.compareBoundaryPoints(m.START_TO_END,n)<0)?k.anchorNode:k.focusNode;u=p?k.anchorOffset:k.focusOffset;s=p?k.focusNode:k.anchorNode;p=p?k.focusOffset:k.anchorOffset;if(o===s&&/^(TD|TH)$/.test(o.nodeName))return e.remove(o.firstChild),c.dom.add(o,i.element,null,"<br />"),q=c.dom.add(o,i.element,null,"<br />"),l=j.createRange(),l.selectNodeContents(q),l.collapse(1),c.selection.setRng(l),!1;if(o==l&&s==l&&l.firstChild&&c.dom.isBlock(l.firstChild))d=
s=o.firstChild,o=d,u=p=0,m=j.createRange(),m.setStart(o,0),n=j.createRange(),n.setStart(s,0);o=o.nodeName=="HTML"?j.body:o;o=o.nodeName=="BODY"?o.firstChild:o;s=s.nodeName=="HTML"?j.body:s;s=s.nodeName=="BODY"?s.firstChild:s;r=this.getParentBlock(o);q=this.getParentBlock(s);e=r?r.nodeName:i.element;if(this.dom.getParent(r,function(a){return/OL|UL|PRE/.test(a.nodeName)}))return!0;if(r&&(r.nodeName=="CAPTION"||/absolute|relative|static/gi.test(r.style.position)))e=i.element,r=null;if(q&&(q.nodeName==
"CAPTION"||/absolute|relative|static/gi.test(q.style.position)))e=i.element,q=null;if(/(TD|TABLE|TH|CAPTION)/.test(e)||r&&e=="DIV"&&/left|right/gi.test(r.style.cssFloat))e=i.element,r=q=null;r=r&&r.nodeName==e?r.cloneNode(0):c.dom.create(e);q=q&&q.nodeName==e?q.cloneNode(0):c.dom.create(e);q.removeAttribute("id");/^(H[1-6])$/.test(e)&&o.nodeValue&&u==o.nodeValue.length&&(q=c.dom.create(i.element));v=i=o;do{if(v==l||v.nodeType==9||this.dom.isBlock(v)||/(TD|TABLE|TH|CAPTION)/.test(v.nodeName))break;
i=v}while(v=v.previousSibling?v.previousSibling:v.parentNode);v=t=s;do{if(v==l||v.nodeType==9||this.dom.isBlock(v)||/(TD|TABLE|TH|CAPTION)/.test(v.nodeName))break;t=v}while(v=v.nextSibling?v.nextSibling:v.parentNode);i.nodeName==e?m.setStart(i,0):m.setStartBefore(i);m.setEnd(o,u);r.appendChild(m.cloneContents()||j.createTextNode(""));try{n.setEndAfter(t)}catch(x){}n.setStart(s,p);q.appendChild(n.cloneContents()||j.createTextNode(""));l=j.createRange();!i.previousSibling&&i.parentNode.nodeName==e?
l.setStartBefore(i.parentNode):m.startContainer.nodeName==e&&m.startOffset==0?l.setStartBefore(m.startContainer):l.setStart(m.startContainer,m.startOffset);!t.nextSibling&&t.parentNode.nodeName==e?l.setEndAfter(t.parentNode):l.setEnd(n.endContainer,n.endOffset);l.deleteContents();b&&c.getWin().scrollTo(0,w.y);if(r.firstChild&&r.firstChild.nodeName==e)r.innerHTML=r.firstChild.innerHTML;if(q.firstChild&&q.firstChild.nodeName==e)q.innerHTML=q.firstChild.innerHTML;if(a(r))r.innerHTML="<br />";if(a(q))q.innerHTML=
b?"&nbsp;":"<br />";b?(l.insertNode(r),l.insertNode(q)):(l.insertNode(q),l.insertNode(r));q.normalize();r.normalize();l=j.createRange();l.selectNodeContents(g?j.createTreeWalker(q,NodeFilter.SHOW_TEXT,null,!1).nextNode()||q:q);l.collapse(1);k.removeAllRanges();k.addRange(l);j=c.dom.getPos(q).y;k=q.clientHeight;if(j<w.y||j+k>w.y+w.h)c.getWin().scrollTo(0,j<w.y?j:j-w.h+k);return!1},backspaceDelete:function(a,b){function c(a){if((a=a.target)&&a.parentNode&&a.nodeName=="BR"&&(l=g.getParentBlock(a)))e.remove(k,
"DOMNodeInserted",c),(a.previousSibling||a.nextSibling)&&i.dom.remove(a)}var g=this,i=g.editor,k=i.getBody(),l,m=i.selection,n=m.getRng(),p=n.startContainer,o;if(p&&i.dom.isBlock(p)&&!/^(TD|TH)$/.test(p.nodeName)&&b&&(p.childNodes.length==0||p.childNodes.length==1&&p.firstChild.nodeName=="BR")){for(l=p;(l=l.previousSibling)&&!i.dom.isBlock(l););if(l){if(p!=k.firstChild){for(n=i.dom.doc.createTreeWalker(l,NodeFilter.SHOW_TEXT,null,!1);o=n.nextNode();)l=o;n=i.getDoc().createRange();n.setStart(l,l.nodeValue?
l.nodeValue.length:0);n.setEnd(l,l.nodeValue?l.nodeValue.length:0);m.setRng(n);i.dom.remove(p)}return e.cancel(a)}}e._add(k,"DOMNodeInserted",c);window.setTimeout(function(){e._remove(k,"DOMNodeInserted",c)},1)}})})();
(function(){var e=tinymce.dom.Event,c=tinymce.each,g=tinymce.extend;tinymce.create("tinymce.ControlManager",{ControlManager:function(b,a){var d=this,a=a||{};d.editor=b;d.controls={};d.onAdd=new tinymce.util.Dispatcher(d);d.onPostRender=new tinymce.util.Dispatcher(d);d.prefix=a.prefix||b.id+"_";d._cls={};d.onPostRender.add(function(){c(d.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var d=null;(d=this.get(b))&&
d.setActive(a);return d},setDisabled:function(b,a){var d=null;(d=this.get(b))&&d.setDisabled(a);return d},add:function(b){b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this));return b},createControl:function(b){var a,d=this,e=d.editor;c(e.plugins,function(c){if(c.createControl&&(a=c.createControl(b,d)))return!1});switch(b){case "|":case "separator":return d.createSeparator()}return!a&&e.buttons&&(a=e.buttons[b])?d.createButton(b,a):d.add(a)},createDropMenu:function(b,a,d){var c=this.editor,e,j,
i,a=g({"class":"mceDropDown",constrain:c.settings.constrain_menus},a);a["class"]=a["class"]+" "+c.getParam("skin")+"Skin";if(i=c.getParam("skin_variant"))a["class"]+=" "+c.getParam("skin")+"Skin"+i.substring(0,1).toUpperCase()+i.substring(1);b=this.prefix+b;e=this.controls[b]=new (d||this._cls.dropmenu||tinymce.ui.DropMenu)(b,a);e.onAddItem.add(function(a,b){var d=b.settings;d.title=c.getLang(d.title,d.title);if(!d.onclick)d.onclick=function(){c.execCommand(d.cmd,d.ui||!1,d.value)}});c.onRemove.add(function(){e.destroy()});
tinymce.isIE&&(e.onShowMenu.add(function(){var a=c.selection;j=a.getNode().nodeName=="IMG"?a.getBookmark():0}),e.onHideMenu.add(function(){j&&c.selection.moveToBookmark(j)}));return this.add(e)},createListBox:function(b,a,d){var c=this.editor;if(this.get(b))return null;a.title=c.translate(a.title);a.scope=a.scope||c;if(!a.onselect)a.onselect=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)};a=g({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;c.settings.use_native_selects?
d=new tinymce.ui.NativeListBox(b,a):(d=d||this._cls.listbox||tinymce.ui.ListBox,d=new d(b,a));this.controls[b]=d;tinymce.isWebKit&&d.onPostRender.add(function(a,b){e.add(b,"mousedown",function(){c.bookmark=c.selection.getBookmark("simple")});e.add(b,"focus",function(){c.selection.moveToBookmark(c.bookmark);c.bookmark=null})});d.hideMenu&&c.onMouseDown.add(d.hideMenu,d);return this.add(d)},createButton:function(b,a,c){var e=this.editor;if(this.get(b))return null;a.title=e.translate(a.title);a.label=
e.translate(a.label);a.scope=a.scope||e;if(!a.onclick&&!a.menu_button)a.onclick=function(){e.execCommand(a.cmd,a.ui||!1,a.value)};a=g({title:a.title,"class":"mce_"+b,unavailable_prefix:e.getLang("unavailable",""),scope:a.scope,control_manager:this},a);b=this.prefix+b;a.menu_button?(c=c||this._cls.menubutton||tinymce.ui.MenuButton,b=new c(b,a),e.onMouseDown.add(b.hideMenu,b)):(c=this._cls.button||tinymce.ui.Button,b=new c(b,a));return this.add(b)},createMenuButton:function(b,a){a=a||{};a.menu_button=
1;return this.createButton(b,a)},createSplitButton:function(b,a,c){var e=this.editor;if(this.get(b))return null;a.title=e.translate(a.title);a.scope=a.scope||e;if(!a.onclick)a.onclick=function(b){e.execCommand(a.cmd,a.ui||!1,b||a.value)};if(!a.onselect)a.onselect=function(b){e.execCommand(a.cmd,a.ui||!1,b||a.value)};a=g({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;b=this.add(new (c||this._cls.splitbutton||tinymce.ui.SplitButton)(b,a));e.onMouseDown.add(b.hideMenu,
b);return b},createColorSplitButton:function(b,a,c){var e=this.editor,f;if(this.get(b))return null;a.title=e.translate(a.title);a.scope=a.scope||e;if(!a.onclick)a.onclick=function(b){e.execCommand(a.cmd,a.ui||!1,b||a.value)};if(!a.onselect)a.onselect=function(b){e.execCommand(a.cmd,a.ui||!1,b||a.value)};a=g({title:a.title,"class":"mce_"+b,menu_class:e.getParam("skin")+"Skin",scope:a.scope,more_colors_title:e.getLang("more_colors")},a);b=this.prefix+b;f=new (c||this._cls.colorsplitbutton||tinymce.ui.ColorSplitButton)(b,
a);e.onMouseDown.add(f.hideMenu,f);e.onRemove.add(function(){f.destroy()});return this.add(f)},createToolbar:function(b,a,c){b=this.prefix+b;a=new (c||this._cls.toolbar||tinymce.ui.Toolbar)(b,a);return this.get(b)?null:this.add(a)},createSeparator:function(b){return new (b||this._cls.separator||tinymce.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){c(this.controls,function(b){b.destroy()});this.controls=null}})})();
(function(){var e=tinymce.util.Dispatcher,c=tinymce.each,g=tinymce.isIE,b=tinymce.isOpera;tinymce.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new e(this);this.onClose=new e(this);this.params={};this.features={}},open:function(a,d){var e="",f=this.editor.settings.dialog_type=="modal",j,i,k;k=tinymce.DOM.getViewPort();a=a||{};d=d||{};i=b?k.w:screen.width;k=b?k.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||
240);a.resizable=!0;a.left=a.left||parseInt(i/2)-a.width/2;a.top=a.top||parseInt(k/2)-a.height/2;d.inline=!1;d.mce_width=a.width;d.mce_height=a.height;d.mce_auto_focus=a.auto_focus;if(f)g?(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1):a.modal=a.alwaysRaised=a.dialog=a.centerscreen=a.dependent=!0;c(a,function(a,b){tinymce.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(b)||(e+=g&&f?(e?";":"")+b+":"+a:(e?",":"")+b+"="+a)});this.features=
a;this.params=d;this.onOpen.dispatch(this,a,d);i=a.url||a.file;tinymce.relaxedDomain&&(i+=(i.indexOf("?")==-1?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain);i=tinymce._addVer(i);try{g&&f?(j=1,window.showModalDialog(i,window,e)):j=window.open(i,a.name,e)}catch(l){}j||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,c,e,g,i){return new (tinymce.resolve(a))(b,c,e,g,i)},confirm:function(a,b,c){b.call(c||this,confirm(this._decode(this.editor.getLang(a,
a))))},alert:function(a,b,c){alert(this._decode(this.editor.getLang(a,a)));b&&b.call(c||this)},_decode:function(a){return tinymce.DOM.decode(a).replace(/\\n/g,"\n")}})})();